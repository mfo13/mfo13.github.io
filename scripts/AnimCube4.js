"use strict";function AnimCube4(e){var t,r,n,o,a,l,f,i,u,c,s,h,v,d,g,m,b,M,p,w,k,L,y,R,F,T,D,A,S,B,x,E,U,I,P,C,X,W,Y,z,q,O,Q,Z,N,H,G,K,j,J=[],V=[],$=[],_=[],ee=[],te=[],re=[[0,-1,0],[0,1,0],[0,0,-1],[0,0,1],[-1,0,0],[1,0,0]],ne=[[-1,-1,-1],[1,-1,-1],[1,-1,1],[-1,-1,1],[-1,1,-1],[1,1,-1],[1,1,1],[-1,1,1]],oe=[[0,1,2,3],[4,7,6,5],[0,4,5,1],[2,6,7,3],[0,3,7,4],[1,5,6,2]],ae=[[0,3,2,1],[0,3,2,1],[3,2,1,0],[3,2,1,0],[0,3,2,1],[0,3,2,1]],le=[[2,5,3,4],[4,3,5,2],[4,1,5,0],[5,1,4,0],[0,3,1,2],[2,1,3,0]],fe=[1,1,-1,-1,-1,-1],ie=[0,0,-1],ue=[1,0,0],ce=[],se=[],he=[],ve=[],de=!0,ge=[],me=[],be=[],Me=[],pe=[],we=!0,ke=-1,Le=6,ye=12,Re=!0,Fe=!1,Te=!1,De=!1,Ae=0,Se=0,Be=0,xe=0,Ee=[3,2,0,5,1,4],Ue=[[12,8,4,0,13,9,5,1,14,10,6,2,15,11,7,3],[3,7,11,15,2,6,10,14,1,5,9,13,0,4,8,12],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],[12,8,4,0,13,9,5,1,14,10,6,2,15,11,7,3],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]];function Ie(){var e=Ce("config");null!=e?function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&(200==t.status?function(e){for(var t=e.split("\n"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(J[n[0]]=n[1].trim())}}(t.responseText):console.log("Error loading config file: "+e),Pe())},t.open("GET",e,!0),t.send()}(e):Pe()}function Pe(){V[0]=Or(255,128,64),V[1]=Or(255,0,0),V[2]=Or(0,255,0),V[3]=Or(0,0,255),V[4]=Or(153,153,153),V[5]=Or(170,170,68),V[6]=Or(187,119,68),V[7]=Or(153,68,68),V[8]=Or(68,119,68),V[9]=Or(0,68,119),V[10]=Or(255,255,255),V[11]=Or(255,255,0),V[12]=Or(255,96,32),V[13]=Or(208,0,0),V[14]=Or(0,144,0),V[15]=Or(32,64,208),V[16]=Or(176,176,176),V[17]=Or(80,80,80),V[18]=Or(255,0,255),V[19]=Or(0,255,255),V[20]=Or(255,160,192),V[21]=Or(32,255,16),V[22]=Or(0,0,0),V[23]=Or(128,128,128);var e=Ce("bgcolor");if(t=null!=e&&6==e.length&&Zr(e)?"#"+e:"gray",e=Ce("butbgcolor"),o=null!=e&&6==e.length&&Zr(e)?"#"+e:t,null!=(e=Ce("colors")))for(var u=0;u<10&&u<e.length/6;u++)Zr(e.substring(6*u,6*u+6))&&(V[u]="#"+e.substring(6*u,6*u+6));for(u=0;u<6;u++)for(var c=0;c<16;c++)$[u][c]=u+10;if(null!=(e=Ce("supercube"))&&"1"==e){Te=!0,Xe(.06);for(u=0;u<16;u++)$[0][u]=22;null!=(e=Ce("scw"))&&("1"==e?Be=1:"2"==e&&(Be=2)),1==Be&&(V[10]="#000000")}if(null!=(e=Ce("gabbacolors"))&&"1"==e&&(1==Te?(V[11]="#fdcf00",V[12]="#fd4e0a",V[13]="#93000d",V[14]="#00702d",V[15]="#00347a"):(Xe(.06),V[11]="#ffd90a",V[12]="#ff4f0b",V[13]="#9e0b19",V[14]="#0b7d39",V[15]="#0b4186")),null!=(e=Ce("borderwidth"))){for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(xe=10*xe+parseInt(e[u]));xe>=0&&xe<=20&&Xe(xe/100)}if(Te)for(u=0;u<6;u++)for(c=0;c<16;c++)_[u][c]=0;var s="lluu";if(null!=(e=Ce("colorscheme"))&&6==e.length)for(u=0;u<6;u++){var h=23;for(c=0;c<23;c++)if(e[u].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(c)){h=c;break}for(c=0;c<16;c++)$[u][c]=h}if("1"==(e=Ce("scramble"))?Ae=1:"2"==e&&(Ae=2),2==Ae)for(u=0;u<6;u++)for(c=0;c<16;c++)ee[u][c]=$[u][c],te[u][c]=_[u][c];if(0==Ae){if(null!=(e=Ce("pos"))&&96==e.length){s="uuuuff","gray"==t&&(t="white");for(u=0;u<6;u++){var g=Ee[u];for(c=0;c<16;c++){var m=Ue[u][c];$[g][m]=23;for(var b=0;b<14;b++)if(e.charAt(16*u+c)=="DFECABdfecabgh".charAt(b)){$[g][m]=b+4;break}}}}if(null!=(e=Ce("facelets"))&&96==e.length)for(u=0;u<6;u++)for(c=0;c<16;c++){$[u][c]=23;for(b=0;b<23;b++)if(e[16*u+c].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(b)){$[u][c]=b;break}}if(null!=(e=Ce("superfacelets"))&&96==e.length)for(u=0;u<6;u++)for(c=0;c<16;c++)for(b=0;b<4;b++)if(e[16*u+c].toLowerCase()=="0123".charAt(b)){_[u][c]=b;break}}if(H=0,j=!1,K=!1,null!=(e=Ce("sign"))&&"1"==e&&(K=!0,H=5,j=!0),null!=(e=Ce("yz"))&&("0"==e?j=!1:"1"==e&&(j=!0)),null!=(e=Ce("randmoves"))){var M=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(M=10*M+parseInt(e[u]));M>0&&(Se=M)}("random"==(e=Ce("move"))||Ae>0)&&(e=En(4,Se)),ge=null==e?[]:ze(e,!0),X=0,O=-1,0==Ae&&(null!=(e=Ce("initmove"))&&("random"==e&&(e=En(4,Se)),be="#"==e?ge:ze(e,!1)),null!=(e=Ce("initrevmove"))&&("random"==e&&(e=En(4,Se)),Me="#"==e?ge:ze(e,!1)),null!=(e=Ce("demo"))&&("random"==e&&(e=En(4,Se)),(me="#"==e?ge:ze(e,!0)).length>0&&me[0].length>0&&(T=!0))),e=Ce("position"),Ur(Wr(ce,ie,ue)),null==e&&(e=s);var L=Math.PI/12;for(u=0;u<e.length;u++){var y=L;switch(e[u].toLowerCase()){case"d":y=-y;case"u":zr(ie,y),zr(ue,y);break;case"f":y=-y;case"b":qr(ie,y),qr(ue,y);break;case"l":y=-y;case"r":Yr(ie,y),Yr(ue,y)}}if(Ur(Wr(ce,ie,ue)),v=0,d=0,null!=(e=Ce("speed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(v=10*v+parseInt(e[u]));if(null!=(e=Ce("doublespeed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(d=10*d+parseInt(e[u]));if(0==v&&(v=10),0==d&&(d=3*v/2),D=0,null==(e=Ce("perspective")))D=2;else for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(D=10*D+parseInt(e[u]));var R,F=0;if(null!=(e=Ce("scale")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(F=10*F+parseInt(e[u]));if(A=1/(1+F/10),B=!1,null!=(e=Ce("hint"))){B=!0,x=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(x=10*x+parseInt(e[u]));x<1?B=!1:x/=10}(E=3.7,null!=(e=Ce("hinthoriz")))&&((R=parseFloat(e))>0&&(E=R));(U=3.7,null!=(e=Ce("hintvert")))&&((R=parseFloat(e))>0&&(U=R));(I=0,null!=(e=Ce("hintborder"))&&"1"==e&&(I=1),Z=13,null!=(e=Ce("buttonheight")))&&((R=parseInt(e))>=9&R<=25&&(Z=R));(Le=0==ge.length?0:6,Q=1,"0"==(e=Ce("buttonbar"))?(Q=0,Z=0,Le=0):"1"==e?Q=1:"2"!=e&&0!=ge.length||(Q=2,Le=0),e=Ce("edit"),p="0"!=e,e=Ce("repeat"),w="0"!=e,e=Ce("clickprogress"),k="0"!=e,"1"==(e=Ce("movetext"))?H=1:"5"==e&&(H=5),G=1,"0"==(e=Ce("movetextspace"))&&(G=0),null!=(e=Ce("textsize")))&&((R=parseInt(e))>=5&R<=40&&(ye=R));(e=Ce("fonttype"),Re=null==e||"1"==e,q=0,null!=(e=Ce("metric"))&&("1"==e?q=1:"2"==e?q=2:"3"==e&&(q=3)),S=1,null!=(e=Ce("align")))&&((R=parseInt(e))>=0&R<=3&&(S=R),R>=3&R<=99&&(S=R/100));null!=(e=Ce("snap"))&&"1"==e&&(Fe=!0);for(u=0;u<6;u++)for(c=0;c<16;c++)ee[u][c]=$[u][c],te[u][c]=_[u][c];be.length>0&&et($,be[0],0,be[0].length,!1),Me.length>0&&et($,Me[0],0,Me[0].length,!0),2==Ae&&et($,ge[0],0,ge[0].length,!0);for(u=0;u<3;u++)se[u]=ie[u],he[u]=ue[u],ve[u]=ce[u];on(t)<128?(n="white",r=function(e){"#"!=e.substring(0,1)&&(e=nn(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return t=Math.floor(1.3*t),r=Math.floor(1.3*r),n=Math.floor(1.3*n),Or(t>255?255:t,r>255?255:r,n>255?255:n)}(t)):(n="black",r=an(t)),f=on(o)<128?"white":"black",a=n,null!=(e=Ce("slidercolor"))&&6==e.length&&Zr(e)&&(a="#"+e),l=an(t),null!=(e=Ce("sliderbgcolor"))&&6==e.length&&Zr(e)&&(l="#"+e),null!=(e=Ce("troughcolor"))&&6==e.length&&Zr(e)&&(l="#"+e),i="black",null!=(e=Ce("cubecolor"))&&6==e.length&&Zr(e)&&(i="#"+e),P=1,"0"==(e=Ce("counter"))&&(P=0),O=ge.length>0&&ge[0][0]>=1e3?0:-1,Mn=bn.getContext("2d"),Ln=Z,yn=Le,Rn=ye,xn(),Fn.appendChild(bn),vr(),T&&nt(-1)}function Ce(e){var t=Un[e];return void 0===t?J[e]:t}function Xe(e){kr[0][0]=kr[0][1]=kr[1][1]=kr[3][0]=e,kr[1][0]=kr[2][0]=kr[2][1]=kr[3][1]=1-e}var We=[0,0,0,0,0,0,1,1,1,3,3,3,3,3,3,2,2,2,2,2,2],Ye=[0,1,2,3,4,5,1,2,4,5,2,0,5,2,0,0,1,2,3,4,5];function ze(e,t){if(t){for(var r=e.indexOf("{");-1!=r;)0,r=e.indexOf("{",r+1);if(null==pe)O=0,pe=[];else{for(var n=[],o=0;o<pe.length;o++)n[o]=pe[o];O=pe.length,pe=n}}var a=1;for(r=e.indexOf(";");-1!=r;)a++,r=e.indexOf(";",r+1);var l=[],f=0;for(r=e.indexOf(";"),a=0;-1!=r;)l[a]=Oe(e.substring(f,r),t,a++),f=r+1,r=e.indexOf(";",f);return l[a]=Oe(e.substring(f),t,a),l}var qe=["m","t","c","s","a","w"];function Oe(e,t,r){if(K&&(e=function(e){return e=function(e,t,r){for(var n=0;n<6;n++){var o=new RegExp(t+Qe[n],"g");e=e.replace(o,Qe[n]+r)}return e}(e=e.replace(/^e| e/g," Dw").replace(/^s| s/g," Fw").replace(/^m| m/g," Lw"),2,"m")}(e)),"#"==e.trim()&&void 0!==ge[r])return ge[r];var n=0,o=[],a="UDFBLRESMXYZxyzudfblr";1==j&&(a="UDFBLRESMXZYxzyudfblr");for(var l=0;l<e.length;l++)if("."==e.charAt(l))o[n]=-1,n++;else if("{"==e.charAt(l)){l++;for(var f="";l<e.length&&"}"!=e.charAt(l);)t&&(f+=e.charAt(l)),l++;t&&(pe[O]=f,o[n]=1e3+O,O++,n++)}else for(var i=0;i<21;i++)if(e.charAt(l)==a.charAt(i)){var u=e.charAt(l);if("E"==u||"S"==u||"M"==u)continue;l++;var c=We[i];if(o[n]=28*Ye[i],l<e.length&&0==We[i])for(var s=0;s<qe.length;s++)if(e.charAt(l)==qe[s]){c=s+1,l++;break}o[n]+=4*c,l<e.length&&("1"==e.charAt(l)?l++:"'"==e.charAt(l)||"3"==e.charAt(l)?(o[n]+=2,l++):"2"==e.charAt(l)&&(++l<e.length&&"'"==e.charAt(l)?(o[n]+=3,l++):o[n]+=1)),n++,l--;break}return o}var Qe=["U","D","F","B","L","R"];function Ze(e,t,r){if(t>=e.length)return"";for(var n="",o=t;o<r;o++){var a=Ge(e,o);""!=a&&(n+=a+(G?" ":""))}return n}var Ne=[[["U","D","F","B","L","R"],["Um","Dm","Fm","Bm","Lm","Rm"],["Ut","Dt","Ft","Bt","Lt","Rt"],["Uc","Dc","Fc","Bc","Lc","Rc"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["Uw","Dw","Fw","Bw","Lw","Rw"]],[["U","D","F","B","L","R"],["~E","E","S","~S","M","~M"],["u","d","f","b","l","r"],["Z","~Z","Y","~Y","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["Uw","Dw","Fw","Bw","Lw","Rw"]],[["U","D","F","B","L","R"],["~E","E","S","~S","M","~M"],["u","d","f","b","l","r"],["Y","~Y","Z","~Z","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["Uw","Dw","Fw","Bw","Lw","Rw"]],[["U","D","F","B","L","R"],["u","d","f","b","l","r"],["Uu","Dd","Ff","Bb","Ll","Rr"],["QU","QD","QF","QB","QL","QR"],["UD'","DU'","FB'","BF'","LR'","RL'"],["UD","DU","FB","BF","LR","RL"],["ud'","du'","fb'","bf'","lr'","rl'"]],[["U","D","F","B","L","R"],["2U","2D","2F","2B","2L","2R"],["u","d","f","b","l","r"],["y","~y","z","~z","~x","x"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["e","e","s","s","m","m"]]],He=["","2","'","2'"];function Ge(e,t){if(t>=e.length)return"";if(e[t]>=1e3)return"";if(-1==e[t])return".";var r=Ne[H-1][Math.floor(e[t]/4)%7][Math.floor(e[t]/28)];return"~"==r.charAt(0)?r.substring(1)+He[(e[t]+2)%4]:r+He[e[t]%4]}var Ke=["","q","h","s"];function je(e){for(var t=0,r=0;r<e.length;r++)e[r]<1e3&&t++;return t}function Je(e,t){for(var r=0,n=0;;){for(;r<e.length&&e[r]>=1e3;)r++;if(n==t)break;r<e.length&&(n++,r++)}return r}function Ve(e,t){for(var r=0,n=0;n<e.length&&(n<t||t<0);n++)r+=$e(e[n]);return r}function $e(e){if(e<0||e>=1e3)return 0;var t=e%4,r=Math.floor(e/4)%7,n=1;switch(q){case 1:1!=t&&3!=t||(n*=2);case 2:(1==r||r>3)&&(n*=2);case 3:3==r&&(n=0),3!=q||4!=r&&5!=r||(n*=2)}return n}function _e(e){O=e.length>0&&e[0]>=1e3?e[0]-1e3:-1}function et(e,t,r,n,o){for(var a=o?r+n:r;;){if(o){if(a<=r)break;a--}if(t[a]>=1e3)O=o?-1:t[a]-1e3;else if(t[a]>=0){var l=t[a]%4+1,f=Math.floor(t[a]/4)%7;4==l&&(l=2),o&&(l=4-l),Mt(e,Math.floor(t[a]/28),l,f)}if(!o&&++a>=r+n)break}}var tt=0,rt=0;function nt(e){if(ot(),(T||0!=ge.length&&0!=ge[C].length)&&(!T||0!=me.length&&0!=me[0].length)){switch(W=1,Y=!1,z=!0,e){case 0:break;case 1:W=-1;break;case 2:Y=!0;break;case 3:W=-1,Y=!0;break;case 4:z=!1}ln(tt++,W)}}function ot(){1==R&&(b=!0)}function at(){X=0,de=!0,M=!1;for(var e=0;e<6;e++)for(var t=0;t<16;t++)$[e][t]=ee[e][t],_[e][t]=te[e][t];be.length>0&&void 0!==be[C]&&et($,be[C],0,be[C].length,!1),Me.length>0&&void 0!==Me[C]&&et($,Me[C],0,Me[C].length,!0),ge.length>0&&_e(ge[C]),Ae>0&&(ge=ze(En(4,Se),!1)),2==Ae&&et($,ge[0],0,ge[0].length,!0);for(e=0;e<3;e++)ie[e]=se[e],ue[e]=he[e],ce[e]=ve[e];setTimeout(vr,0)}var lt=[[[0,4],[0,4]],[[0,4],[0,4]],[[0,4],[0,4]],[[0,4],[0,4]],[[0,4],[0,4]],[[0,4],[0,4]]],ft=[],it=[],ut=[],ct=[],st=[[[0,0],[0,0]],[[0,4],[0,4]],[[0,4],[0,1]],[[0,1],[0,4]],[[0,4],[3,4]],[[3,4],[0,4]]],ht=[[1,0,3,3,2,3],[0,1,5,5,4,5],[2,3,1,0,3,2],[4,5,0,1,5,4],[3,2,2,4,1,0],[5,4,4,2,0,1]],vt=[[0,1,5,5,4,5],[1,0,3,3,2,3],[4,5,0,1,5,4],[2,3,1,0,3,2],[5,4,4,2,0,1],[3,2,2,4,1,0]],dt=[[[0,0],[0,0]],[[0,4],[2,3]],[[0,4],[1,2]],[[2,3],[0,4]],[[1,2],[0,4]]],gt=[[0,0,4,4,2,4],[0,0,3,3,1,3],[2,4,0,0,4,2],[1,3,0,0,3,1],[4,2,2,1,0,0],[3,1,1,2,0,0]],mt=[[0,0,3,3,1,3],[0,0,4,4,2,4],[1,3,0,0,3,1],[2,4,0,0,4,2],[3,1,1,2,0,0],[4,2,2,1,0,0]];function bt(e){for(var t=0;t<6;t++)ft[t]=st[ht[e][t]],ct[t]=st[vt[e][t]],it[t]=dt[gt[e][t]],ut[t]=dt[mt[e][t]];de=!1}function Mt(e,t,r,n){switch(n){case 3:Tt(e,t,4-r,!1),Tt(e,t,4-r,!0),Tt(e,1^t,r,!0),Tt(e,1^t,r,!1);break;case 2:Tt(e,t,4-r,!1);case 1:Tt(e,t,4-r,!0);break;case 6:Tt(e,t,4-r,!0),Tt(e,1^t,r,!0);break;case 5:Tt(e,1^t,4-r,!1),Tt(e,t,4-r,!1);break;case 4:Tt(e,1^t,r,!1);default:Tt(e,t,4-r,!1)}}var pt=[0,1,2,3,7,11,15,14,13,12,8,4],wt=[5,6,10,9],kt=[1,4,-1,-4,1,4,-1,-4],Lt=[0,3,15,12,4,2,11,13],yt=[[3,3,3,0],[2,1,1,1],[3,3,0,0],[2,1,1,2],[3,2,0,0],[2,2,0,1]],Rt=[[7,7,7,4],[6,5,5,5],[7,7,4,4],[6,5,5,6],[7,6,4,4],[6,6,4,5]],Ft=[];function Tt(e,t,r,n){Dt(e,t,r,n),1==Te&&r>0&&r<4&&(Dt(_,t,r,n),function(e,t,r){if(0==r)for(var n=0;n<16;n++)_[e][n]=(_[e][n]+4-t)%4;4==e&&(0==r&&(Ct(12,1,3),1==t?Ct(0,1,1):2==t?Ct(0,1,2):3==t&&Ct(0,4,0)),1==r&&(Ct(8,1,3),1==t?Ct(4,1,1):2==t?Ct(4,1,2):3==t&&Ct(1,4,0)));5==e&&(0==r&&(Ct(0,1,3),1==t?Ct(3,4,0):2==t?Ct(12,1,2):3==t&&Ct(12,1,1)),1==r&&(Ct(4,1,3),1==t?Ct(2,4,0):2==t?Ct(8,1,2):3==t&&Ct(8,1,1)));0==r&&(2==e&&Xt(0,4-t),3==e&&Xt(1,t));1==r&&(2==e&&Xt(2,4-t),3==e&&Xt(3,t))}(t,r,n))}function Dt(e,t,r,n){if(!n){for(var o=0;o<12;o++)Ft[(o+3*r)%12]=e[t][pt[o]];for(o=0;o<12;o++)e[t][pt[o]]=Ft[o];for(o=0;o<4;o++)Ft[(o+r)%4]=e[t][wt[o]];for(o=0;o<4;o++)e[t][wt[o]]=Ft[o]}var a=4*r;for(o=0;o<4;o++)for(var l=le[t][o],f=n?Rt[t][o]:yt[t][o],i=kt[f],u=Lt[f],c=0;c<4;c++,a++)Ft[a%16]=e[l][c*i+u];for(o=0,a=0;o<4;o++)for(l=le[t][o],f=n?Rt[t][o]:yt[t][o],i=kt[f],u=Lt[f],c=0;c<4;c++,a++)e[l][c*i+u]=Ft[a]}var At,St,Bt,xt,Et,Ut,It,Pt=[[[0,1,0],[0,4,1],[0,4,4],[0,1,5]],[[12,1,0],[3,4,1],[3,4,4],[12,1,5]],[[4,1,0],[1,4,1],[1,4,4],[4,1,5]],[[8,1,0],[2,4,1],[2,4,4],[8,1,5]]];function Ct(e,t,r){for(var n=e,o=0;o<4;n+=t,o++)_[r][n]=(_[r][n]+2)%4}function Xt(e,t){for(var r=0;r<4;r++)for(var n=Pt[e][r],o=n[0],a=0;a<4;o+=n[1],a++)_[n[2]][o]=(_[n[2]][o]+t)%4}var Wt,Yt,zt=[],qt=[],Ot=[],Qt=[],Zt=[[[0,0],[4,0],[4,1],[0,1]],[[4,0],[4,4],[3,4],[3,0]],[[4,4],[0,4],[0,3],[4,3]],[[0,4],[0,0],[1,0],[1,4]],[[0,1],[4,1],[4,2],[0,2]],[[3,0],[3,4],[2,4],[2,0]],[[0,2],[4,2],[4,3],[0,3]],[[2,0],[2,4],[1,4],[1,0]]],Nt=[[1,0],[0,1],[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1]],Ht=[[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,-1,1,-1,1,-1,1,-1],[1,-1,1,-1,1,-1,1,-1],[-1,1,-1,1,-1,1,-1,1],[1,-1,1,-1,1,-1,1,-1]],Gt=[],Kt=[],jt=[[[1,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,1,0],[0,0,1]]],Jt=[[[0,0,1],[0,0,0],[-1,0,0]],[[0,1,0],[-1,0,0],[0,0,0]],[[0,0,0],[0,0,1],[0,-1,0]]],Vt=[[[0,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,0,0],[0,0,0]]],$t=[1,-1,1,-1,1,-1],_t=[],er=[],tr=[],rr=[],nr=[],or=[],ar=[],lr=[],fr=[],ir=[],ur=[[1,0,0,0],[0,1,0,0],[1,1,0,0],[1,1,1,1],[1,0,0,1],[1,0,0,2],[0,1,1,0]],cr=[],sr=[[0,2,2,2],[2,1,2,2],[2,2,2,2],[2,2,2,2],[0,2,2,0],[0,2,2,0],[0,2,2,0]],hr=[[0,1,2,3],[0,1,3,2],[0,3,2,1],[3,2,1,0]];function vr(){if(Mn.save(),Mn.fillStyle=t,1!=Q||0!=Le&&!T&&0!=ge[C].length?(Nr(Mn,0,0,At,St),Mn.fillRect(0,0,At,St)):(Nr(Mn,0,0,At,St-pn),Mn.fillRect(0,0,At,St-pn)),It=0,de)Rr(ie,ue,ce,lt,3,9,0);else{for(var e=Math.cos(h+s),n=Math.sin(h+s)*$t[u],i=0;i<3;i++){_t[i]=0,er[i]=0;for(var v=0;v<3;v++){var d=Math.floor(u/2);_t[i]+=ie[v]*(Vt[d][i][v]+jt[d][i][v]*e+Jt[d][i][v]*n),er[i]+=ue[v]*(Vt[d][i][v]+jt[d][i][v]*e+Jt[d][i][v]*n)}}Wr(tr,_t,er);var g,m,b,M=Math.cos(h-s),p=Math.sin(h-s)*$t[u];for(i=0;i<3;i++){rr[i]=0,nr[i]=0;for(v=0;v<3;v++){d=Math.floor(u/2);rr[i]+=ie[v]*(Vt[d][i][v]+jt[d][i][v]*M+Jt[d][i][v]*p),nr[i]+=ue[v]*(Vt[d][i][v]+jt[d][i][v]*M+Jt[d][i][v]*p)}}Wr(or,rr,nr),lr[0]=ie,fr[0]=ue,ir[0]=ce,lr[1]=_t,fr[1]=er,ir[1]=tr,lr[2]=rr,fr[2]=nr,ir[2]=or,cr[0]=ft,cr[1]=it,cr[2]=ut,cr[3]=ct;var w=[],k=[];for(i=0;i<5;i++)Er(k,re[u]),Ir(Er(w,k),.5),Xr(Ir(Er(ar,ie),5+D),Xr(k,Ir(w,i))),m=Pr(ar,re[u]),0==i?(m<0&&(g=0),m>0&&(g=3)):(m>0&&b<0||m<0&&b>0)&&(g=4-i,i=5),b=m;for(i=0;i<4;i++){v=hr[g][i];var L=ur[c][v],y=u%2==1?3-v:v;Rr(lr[L],fr[L],ir[L],cr[v],sr[c][v],i,y)}}if(N||R||(ke=-1),!(Ae>0&&2==Q)){if(!T&&ge.length>0){if(ge[C].length>0){if(Le>0){Mn.lineWidth=kn,Mn.strokeStyle=f;var F=(At-2)*function(e,t){for(var r=0,n=0;n<t;n++)e[n]<1e3&&r++;return r}(ge[C],X)/je(ge[C]);Mn.fillStyle=l,Mn.fillRect(wn,St-Le-wn,At-pn,Le),Mn.fillStyle=a,Mn.fillRect(wn,St-Le-wn,F,Le),Mn.beginPath(),Mn.rect(wn,St-Le-wn,At-pn,Le),Mn.stroke()}Mn.font="bold "+ye+"px helvetica";var A=Ve(ge[C],X)+"/"+Ve(ge[C],-1)+Ke[q],S=Mn.measureText(A).width,B=At-S-2,x=St-Le-Math.floor(4*pn);H>0?(P&&Sr(Mn,A,Re?B-pn:B,x-ye),function(e,t){var n=0==X?Je(ge[C],X):X,o=Ze(ge[C],0,n),a=Ge(ge[C],n),l=Ze(ge[C],n+1,ge[C].length);G&&(""==a&&(o=o.substr(0,o.length-1)),""!=l&&(l=" "+l.substr(0,l.length-1)));var f=e.measureText(o).width,i=e.measureText(a).width,u=e.measureText(l).width,c=1;c+f+i+u>At&&(c=Math.min(1,At/2-f-i/2),c=Math.max(c,At-f-i-u-2));i>0&&(e.fillStyle=r,e.lineWidth=2,e.strokeStyle="black",e.beginPath(),Rn<=14?e.fillRect(c+f-1,St-Le-ye-Math.floor(4*pn),i+2,ye+Math.floor(3*pn)):e.fillRect(c+f-1,St-Le-ye-Math.floor(2*pn),i+2,ye+Math.floor(pn)));f>0&&Sr(e,o,c,t);i>0&&Sr(e,a,c+f,t);u>0&&Sr(e,l,c+f+i,t)}(Mn,x)):P&&Sr(Mn,A,Re?B-pn:B,x)}if(ge.length>1){Mn.font="bold "+ye+"px helvetica";A=C+1+"/"+ge.length,S=Mn.measureText(A).width,B=At-S-2*Z-Math.floor(5*pn);Sr(Mn,A,B,dr()),Gr(Mn,7,At-2*Z,0),Gr(Mn,8,At-Z,0)}}O>=0&&(Mn.font="bold "+ye+"px helvetica",Sr(Mn,pe[O],Re?pn:0,dr()))}Mn.restore(),we&&0!=Q&&function(e){var t=Z%2==0?1:0;if(t+=Math.floor(pn+.5)-1,2==Q)return e.fillStyle=0==ke||Ae>0&&6==ke?an(o):o,e.fillRect(wn,St-Z,Z,Z),e.lineWidth=kn,e.strokeStyle=f,e.beginPath(),e.rect(wn,St-Z-wn,Z,Z),e.stroke(),void Gr(e,0,Z/2,St-(Z+1)/2-t);if(1==Q){for(var r=0,n=0;n<7;n++){var a=Math.floor((At-r)/(7-n));e.fillStyle=ke==n?an(o):o,e.fillRect(r,St,a,Z),e.lineWidth=kn,e.strokeStyle=f,e.beginPath(),0==n?e.rect(r+wn,St-wn,a-pn,Z):e.rect(r-wn,St-wn,a,Z),e.stroke(),e.strokeStyle="black",Gr(e,n,r+a/2,St+Z/2-t),r+=a}we=!1}}(Mn)}function dr(){return Rn<10?Math.floor(10*pn):Rn<12?Math.floor(12*pn):Rn<14?Math.floor(14*pn):ye}var gr=[],mr=[],br=[],Mr=[],pr=[[],[],[],[],[],[]],wr=[[],[],[],[],[],[]],kr=[[.1,.1],[.9,.1],[.9,.9],[.1,.9]],Lr=[[0,0],[0,1],[1,1],[1,0]],yr=[];function Rr(e,t,r,n,o,a,l){for(var f=0;f<8;f++){var c=(v=At<St?At:St-Le)/3.7*Pr(ne[f],t)*A,s=v/3.7*Pr(ne[f],r)*A;c/=1-(d=v/(5+D)*Pr(ne[f],e)*A)/v,s/=1-d/v,br[f]=At/2+c,Mr[f]=0==S?(St-Le)/2*A-s:1==S?(St-Le)/2-s:2==S?St-Le-(St-Le)/2*A-s:(St-Le)*(S*(1-A)+A/2)-s}for(f=0;f<6;f++)for(var h=0;h<4;h++)pr[f][h]=br[oe[f][h]],wr[f][h]=Mr[oe[f][h]];if(B)for(f=0;f<6;f++)if(Xr(Ir(Er(ar,e),5+D),re[f]),Pr(ar,re[f])<0){Ir(Er(yr,re[f]),x);var v,d;c=(v=At<St?At:St-Le)/E*Pr(yr,t),s=v/U*Pr(yr,r);c/=1-(d=v/(5+D)*Pr(yr,e))/v,s/=1-d/v;var g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g>0&&m>0)for(var b=0,w=n[f][1][0];b<m;b++,w++)for(var k=0,L=n[f][0][0];k<g;k++,L++){for(h=0;h<4;h++)Tr(f,h,gr,mr,L+kr[h][0],w+kr[h][1],M),gr[h]=Math.floor(gr[h]+(M?-c:c)),mr[h]=Math.floor(mr[h]-s);1==Te?($r(Mn,gr,mr,"#fdfdfd"),Vr(Mn,gr,mr,I?an("#fdfdfd"):"#fdfdfd"),rn(Mn,gr,mr,f,_[f][4*w+L],V[$[f][4*w+L]])):($r(Mn,gr,mr,V[$[f][4*w+L]]),Vr(Mn,gr,mr,I?an(V[$[f][4*w+L]]):V[$[f][4*w+L]]))}}for(f=0;f<6;f++){g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g<=0||m<=0){var y=Fr(f,l);if(0!=y){for(h=0;h<4;h++){var F=ae[f][h];gr[h]=Math.floor(pr[f][h]+(pr[1^f][F]-pr[f][h])*y),mr[h]=Math.floor(wr[f][h]+(wr[1^f][F]-wr[f][h])*y),M&&(gr[h]=At-gr[h])}$r(Mn,gr,mr,i)}}else{for(h=0;h<4;h++)Tr(f,h,gr,mr,n[f][0][Lr[h][0]],n[f][1][Lr[h][1]],M);a<3?$r(Mn,gr,mr,i):(Xr(Ir(Er(ar,e),5+D),re[f]),Pr(ar,re[f])>0&&$r(Mn,gr,mr,i))}}for(f=0;f<6;f++)if(Xr(Ir(Er(ar,e),5+D),re[f]),Pr(ar,re[f])>0){g=n[f][0][1]-n[f][0][0],m=n[f][1][1]-n[f][1][0];if(g>0&&m>0)for(b=0,w=n[f][1][0];b<m;b++,w++)for(k=0,L=n[f][0][0];k<g;k++,L++){for(h=0;h<4;h++)Tr(f,h,gr,mr,L+kr[h][0],w+kr[h][1],M);1==Te?(Vr(Mn,gr,mr,"#fdfdfd"),$r(Mn,gr,mr,"#fdfdfd"),rn(Mn,gr,mr,f,_[f][4*w+L],V[$[f][4*w+L]])):(Vr(Mn,gr,mr,V[$[f][4*w+L]]),$r(Mn,gr,mr,V[$[f][4*w+L]]))}if(!p||R)continue;var T=(pr[f][1]-pr[f][0]+pr[f][2]-pr[f][3])/6,P=(pr[f][3]-pr[f][0]+pr[f][2]-pr[f][1])/6,C=(wr[f][1]-wr[f][0]+wr[f][2]-wr[f][3])/6,X=(wr[f][3]-wr[f][0]+wr[f][2]-wr[f][1])/6;if(3==o)for(h=0;h<8;h++){for(F=0;F<4;F++)Tr(f,F,zt[It],qt[It],Zt[h][F][0],Zt[h][F][1],!1);if(Ot[It]=(T*Nt[h][0]+C*Nt[h][1])*Ht[f][h],Qt[It]=(P*Nt[h][0]+X*Nt[h][1])*Ht[f][h],Gt[It]=le[f][h%4],Kt[It]=Math.floor(h/4),24==++It)break}else if(0==o){if(f!=u&&g>0&&m>0){for(h=4==g?0==n[f][1][0]?0:2:0==n[f][0][0]?3:1,F=0;F<4;F++)Tr(f,F,zt[It],qt[It],Zt[h][F][0],Zt[h][F][1],!1);Ot[It]=(T*Nt[h][0]+C*Nt[h][1])*Ht[f][h],Qt[It]=(P*Nt[h][0]+X*Nt[h][1])*Ht[f][h],Gt[It]=u,Kt[It]=0,It++}}else if(1==o&&f!=u&&g>0&&m>0){h=4==g?1==n[f][1][0]?0:2:1==n[f][0][0]?3:1;h+=4;for(F=0;F<4;F++)Tr(f,F,zt[It],qt[It],Zt[h][F][0],Zt[h][F][1],!1);Ot[It]=(T*Nt[h][0]+C*Nt[h][1])*Ht[f][h],Qt[It]=(P*Nt[h][0]+X*Nt[h][1])*Ht[f][h],Gt[It]=u,Kt[It]=1,It++}}}function Fr(e,t){var r=0,n=e%2,o=u%2;return 0==c?r=a(0==o?0:3):1==c?r=a(0==o?1:2):2==c?e==u?(0==o&&1==t||1==o&&2==t)&&(r=.5):(0==o&&2==t||1==o&&1==t)&&(r=.5):4!=c&&5!=c&&6!=c||((0==n&&1==t||1==n&&2==t)&&(r=.25),(1==n&&0==t||0==n&&3==t)&&(r=.75)),r;function a(e){if(0==n){if(t==e)return e/4;if(t==e+1)return(e+1)/4}else{if(t==e)return(3-e)/4;if(t==e-1)return(4-e)/4}return 0}}function Tr(e,t,r,n,o,a,l){o/=4,a/=4;var f=pr[e][0]+(pr[e][1]-pr[e][0])*o,i=wr[e][0]+(wr[e][1]-wr[e][0])*o,u=pr[e][3]+(pr[e][2]-pr[e][3])*o,c=wr[e][3]+(wr[e][2]-wr[e][3])*o;r[t]=Math.floor(.5+f+(u-f)*a),n[t]=Math.floor(.5+i+(c-i)*a),l&&(r[t]=At-r[t])}var Dr=[1,1,-1,-1,-1,1,1,-1,-1,0,1,0,0,1,0,-1],Ar=[];function Sr(e,t,r,o){if(Re){e.fillStyle="black";for(var a=0;a<Ar.length;a+=2)e.fillText(t,r+Ar[a],o+Ar[a+1]);e.fillStyle="white"}else e.fillStyle=n;e.fillText(t,r,o)}var Br=[-1,3,1,-1,0,2,4,-1],xr=[];function Er(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ur(e){var t=Math.sqrt(Pr(e,e));return e[0]/=t,e[1]/=t,e[2]/=t,e}function Ir(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e}function Pr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Cr(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e}function Xr(e,t){return e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e}function Wr(e,t,r){return e[0]=t[1]*r[2]-t[2]*r[1],e[1]=t[2]*r[0]-t[0]*r[2],e[2]=t[0]*r[1]-t[1]*r[0],e}function Yr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[1]*n-e[2]*r,a=e[1]*r+e[2]*n;return e[1]=o,e[2]=a,e}function zr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[2]*r,a=e[0]*r+e[2]*n;return e[0]=o,e[2]=a,e}function qr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[1]*r,a=e[0]*r+e[1]*n;return e[0]=o,e[1]=a,e}function Or(e,t,r){return"#"+Qr(e.toString(16))+Qr(t.toString(16))+Qr(r.toString(16))}function Qr(e){return("00"+e).substring(e.length)}function Zr(e){for(var t=0,r=0;r<6;r++)for(var n=0;n<16;n++)if(e[r].toLowerCase()=="0123456789abcdef".charAt(n)){t++;break}return 6==t}function Nr(e,t,r,n,o){e.beginPath(),e.moveTo(t,r),e.lineTo(t+n,r),e.lineTo(t+n,r+o),e.lineTo(t,r+o),e.lineTo(t,r),e.closePath(),e.clip()}var Hr=[];function Gr(e,t,r,n){switch(r=Math.floor(r),n=Math.floor(n),t){case 0:jr(e,r-Hr[5],n-Hr[5],Hr[3],2.05*Hr[5]),Kr(e,r+Hr[5],n,-1);break;case 1:jr(e,r+Hr[1],n-Hr[5],Hr[3],2.05*Hr[5]),Kr(e,r-Hr[1],n,-1);break;case 2:Kr(e,r+Hr[1],n,-1);break;case 3:R?jr(e,r-Hr[5],n-Hr[5],2.05*Hr[5],2.05*Hr[5]):(jr(e,r-Hr[9]/2,n-Hr[7]/2,Hr[8],1.5*Hr[5]),jr(e,r-Hr[2],n-Hr[5],Hr[3],2.05*Hr[5]));break;case 4:Kr(e,r-Hr[2],n,1);break;case 5:jr(e,r-Hr[6],n-Hr[5],Hr[3],2.05*Hr[5]),Kr(e,r-1.5*Hr[1],n,1);break;case 6:jr(e,r+Hr[1],n-Hr[5],Hr[3],2.05*Hr[5]),Kr(e,r-Hr[6],n,1);break;case 7:var a=7==ke?an(o):o;Jr(e,r-2*pn,n+pn,Z,n+Z,a),Kr(e,r+2*pn+Z/2-3*pn,n+Z/2+wn,-1);break;case 8:a=8==ke?an(o):o;Jr(e,r-2*pn,n+pn,Z,n+Z,a),Kr(e,r-pn+Z/2-3*pn,n+Z/2+wn,1)}}function Kr(e,t,r,n){var o=4.5*pn,a=[],l=[];a[0]=t,a[1]=t+n,a[2]=t+5*pn*n,a[3]=t+n,a[4]=t,l[0]=r-o,l[1]=r-o,l[2]=r,l[3]=r+o,l[4]=r+o,function(e,t,r){e.beginPath(),e.moveTo(t[0]+wn,r[0]+wn);for(var n=1;n<5;n++)e.lineTo(t[n]+wn,r[n]+wn);e.closePath(),e.fillStyle="white",e.strokeStyle="black",e.fill(),e.lineWidth=kn,e.stroke()}(e,a,l)}function jr(e,t,r,n,o){e.lineWidth=kn,e.beginPath(),e.rect(t+wn,r+wn,n-1,o-1),e.fillStyle="white",e.fill(),e.strokeStyle="black",e.stroke()}function Jr(e,t,r,n,o,a){e.lineWidth=kn,e.beginPath(),e.rect(t+wn,r+wn,n-1,o-1),e.fillStyle=a,e.fill(),e.strokeStyle="black",e.stroke()}function Vr(e,t,r,n){e.beginPath(),e.moveTo(t[0],r[0]),e.lineTo(t[1],r[1]),e.lineTo(t[2],r[2]),e.lineTo(t[3],r[3]),e.closePath(),e.strokeStyle=n,e.lineWidth=.7*pn,e.stroke()}function $r(e,t,r,n){e.beginPath(),e.moveTo(t[0],r[0]),e.lineTo(t[1],r[1]),e.lineTo(t[2],r[2]),e.lineTo(t[3],r[3]),e.closePath(),e.fillStyle=n,e.fill()}var _r,en,tn=[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]];function rn(e,t,r,n,o,a){var l=[],f=[];if(2!=Be||"#ffffff"!=a){for(var i=0;i<4;i++)l[i]=Math.floor(t[i]+.05*(t[tn[2][i]]-t[i])),f[i]=Math.floor(r[i]+.05*(r[tn[2][i]]-r[i]));0==n&&(o=(o+1)%4),4==n&&(o=(o+3)%4);var u=tn[o][0],c=tn[o][1],s=tn[o][2],h=tn[o][3],v=.26*(l[s]-l[c]),d=.26*(f[s]-f[c]),g=(l[u]-l[c])/2,m=f[c]+(f[u]-f[c])/2,b=f[s]+(f[h]-f[s])/2,M=(l[h]-l[s])/2,p=1^o;e.fillStyle=a,e.beginPath(),e.moveTo(l[u]+(l[h]-l[u])/2,f[u]+(f[h]-f[u])/2),e.lineTo(l[p]+g,m),e.lineTo(l[p]+v+g,m+d),e.lineTo(l[p]+v,f[p]+d),p=(p+1)%4,e.lineTo(l[p]-v,f[p]-d),e.lineTo(l[p]-v+M,b-d),e.lineTo(l[p]+M,b),e.closePath(),e.fill(),e.lineWidth=.6*pn,e.strokeStyle="black",e.stroke()}}function nn(e){return"white"==e?"#FFFFFF":"black"==e?"#000000":"#808080"}function on(e){return"#"!=e.substring(0,1)&&(e=nn(e)),(299*parseInt(e.substring(1,3),16)+587*parseInt(e.substring(3,5),16)+114*parseInt(e.substring(5,7),16))/1e3}function an(e){"#"!=e.substring(0,1)&&(e=nn(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return Or(t=Math.floor(.7*t),r=Math.floor(.7*r),n=Math.floor(.7*n))}function ln(e,t){if(e>rt)setTimeout(ln,0,e,t);else{if(!T&&(0==ge.length||0==ge[C].length))return R=!1,we=!0,void vr();if(!z){for(var r=ge[C];X<r.length;){if(r[X]>=1e3)O=r[X]-1e3;else if(-1!=r[X]){var n=r[X]%4+1,o=Math.floor(r[X]/4)%7,a=Math.floor(r[X]/28);Mt($,a,4==n?2:n,o)}X++}return R=!1,we=!0,vr(),void rt++}var l,f,i,g,M,p,k=t;m=!1,requestAnimationFrame(function e(){if(D){if(D=!1,p=!1,w)k>0?X>=r.length&&(X=0,_e(r)):(O=-1,0==X&&(X=r.length));else if(k>0&&X>=r.length||k<0&&0==X)return b=!1,R=!1,rt++,we=!0,void vr();R=!0,we=!0}if(A&&(A=!1,k<0&&(x=!1,0==X?(x=!0,B=!0):X--),!x)){if(F=!1,-1==r[X]){if(vr(),!Y)for(l=Date.now();Date.now()-l<1e3;);}else r[X]>=1e3?O=k>0?r[X]-1e3:-1:F=!0;if(F){n=r[X]%4+1,o=Math.floor(r[X]/4)%7;var t=n<3;if(4==n&&(n=2),k<0&&(t=!t,n=4-n),a=Math.floor(r[X]/28),L=!1,de=!0,y=!0,h=0,fe[a]>0&&(t=!t),z){M=Math.PI/2,g=t?1:-1;var E=67*v;2==n&&(M=Math.PI,E=67*d),L=!0,u=a,c=o,bt(a),l=Date.now(),f=l,i=g*M/E,s=0}}else S=!0}x||(F&&(z&&s*g<M?(vr(),(m||b)&&(S=!0),f=Date.now(),s=i*(f-l)):S=!0),S&&(S=!1,A=!0,F&&(s=0,L=!1,de=!0,Mt($,a,n,o),y=!1,z&&vr(),Y&&(p=!0)),k>0?(++X<r.length&&r[X]>=1e3&&(O=r[X]-1e3,X++),X==r.length&&(T?function(e){X=0;for(var t=0;t<6;t++)for(var r=0;r<16;r++)$[t][r]=ee[t][r],_[t][r]=te[t][r];be.length>0&&void 0!==be[C]&&et($,be[C],0,be[C].length,!1);Me.length>0&&void 0!==Me[C]&&et($,Me[C],0,Me[C].length,!0);_e(e)}(r):B=!0)):O=-1,(m||b||p)&&(B=!0)));if(B)return B=!1,D=!0,tt<=rt+1&&(R=!1),we=!0,0==ke&&at(),vr(),T&&(at(),T=!1),b=!1,rt++,void(1==X&&r[0]>=1e3&&X--);requestAnimationFrame(e)});var F=!1,D=!0,A=!0,S=!1,B=!1,x=!1;r=T?me[0]:ge[C]}}document.addEventListener("touchstart",dn),document.addEventListener("touchmove",Tn,{passive:!1}),document.addEventListener("touchend",vn),document.addEventListener("mousedown",dn),document.addEventListener("mousemove",Tn),document.addEventListener("mouseup",vn),document.addEventListener("contextmenu",Sn);var fn=!1,un=!0,cn=document.getElementsByTagName("div"),sn=cn.length>0&&"wrap"==cn[0].className;function hn(e){sn?cn[0].style.overflow=e:document.body.style.overflow=e}function vn(e){if(fn&&void 0!==e.touches&&(e.preventDefault(),hn("auto")),fn?setTimeout(function(){un=!0},100):un=!0,fn=!1,F=!1,N)N=!1,we=!0,vr();else if(L&&!y){L=!1,h+=s,s=0;for(var t=h;t<0;)t+=32*Math.PI;var r=Math.floor(8*t/Math.PI)%16;(Fe||r%4==0||r%4==3)&&(r=Math.floor((r+2)/4),fe[u]>0&&(r=(4-r)%4),h=0,de=!0,Mt($,u,r,c)),vr()}}function dn(e){var t=bn.getBoundingClientRect(),r=Math.floor(t.left),n=Math.floor(t.top);if(void 0===e.touches)var o=e.clientX,a=e.clientY;else o=e.touches[0].clientX,a=e.touches[0].clientY;o<r||o>r+At/pn||a<n||a>n+(St+Z)/pn||(e.preventDefault(),fn=!0,un=!1,void 0!==e.touches&&hn("hidden"),_r=r,en=n,Et=Bt=Dn(e),Ut=xt=An(e),g=!1,(ke=function(e,t){if(0==Q)return-1;if(ge.length>1&&e>=At-2*Z&&e<At-Z&&t>=0&&t<Z)return 7;if(ge.length>1&&e>=At-Z&&e<At&&t>=0&&t<Z)return 8;if(2==Q)return e>=0&&e<Z&&t>=St-Z&&t<St?0:-1;if(t<St)return-1;for(var r=0,n=0;n<7;n++){var o=(At-r)/(7-n);if(e>=r&&e<r+o&&t>=St&&t<St+Z)return n;r+=o}return-1}(Bt,xt))>=0?(N=!0,3==ke?R?ot():M=!M:0==ke?Ae>0&&2==Q?1==De?(De=!1,ot(),at()):(De=!0,nt(Br[ke=6])):(ot(),at()):7==ke||8==ke?(ot(),setTimeout(at,20),C=7==ke?C>0?C-1:ge.length-1:C<ge.length-1?C+1:0):nt(Br[ke]),we=!0,vr()):Le>0&&ge.length>0&&ge[C].length>0&&xt>St-Le&&xt<=St?k&&(ot(),gn(tt++)):(M&&(Et=Bt=At-Bt),void 0===e.touches?!p||R||0!=e.button||e.shiftKey||(g=!0):p&&!R&&(g=!0)))}function gn(e){if(e>rt)setTimeout(gn,0,e);else{var t=je(ge[C]),r=Math.floor(((Bt-1)*t*2/(At-2)+1)/2);(r=Math.max(0,Math.min(t,r)))>0&&(r=Je(ge[C],r)),r>X&&et($,ge[C],X,r-X,!1),r<X&&et($,ge[C],r,X-r,!0),X=r,F=!0,vr(),R=!1,rt++}}var mn,bn,Mn,pn,wn,kn,Ln,yn,Rn,Fn;xr=[];function Tn(e){if(fn&&!N){if(void 0!==e.touches&&e.preventDefault(),F){ot();var t=je(ge[C]),r=Math.floor(((Dn(e)-1)*t*2/(At-2)+1)/2);return(r=Math.max(0,Math.min(t,r)))>0&&(r=Je(ge[C],r)),r>X&&et($,ge[C],X,r-X,!1),r<X&&et($,ge[C],r,X-r,!0),X=r,void vr()}var n=M?At-Dn(e):Dn(e),o=An(e),a=n-Bt,l=o-xt;if(p&&g&&!L&&!R){Et=n,Ut=o;for(var f=0;f<It;f++){var i=zt[f][0],h=zt[f][1]-i,v=zt[f][3]-i,d=qt[f][0],m=qt[f][1]-d,b=qt[f][3]-d,w=(b*(Bt-i)-v*(xt-d))/(h*b-v*m),k=(-m*(Bt-i)+h*(xt-d))/(h*b-v*m);if(w>0&&w<1&&k>0&&k<1){if(a*a+l*l<144)return;if(Wt=Ot[f],Yt=Qt[f],Math.abs(Wt*a+Yt*l)/Math.sqrt((Wt*Wt+Yt*Yt)*(a*a+l*l))>.75){L=!0,u=Gt[f],c=Kt[f];break}}}g=!1,Bt=Et,xt=Ut}a=(n-Bt)/pn,l=(o-xt)/pn,!L||R?(Ur(Cr(ie,Ir(Er(xr,ue),-.016*a))),Ur(Wr(ue,ce,ie)),Ur(Cr(ie,Ir(Er(xr,ce),.016*l))),Ur(Wr(ce,ie,ue)),Bt=n,xt=o):(de&&bt(u),s=.03*(Wt*a+Yt*l)/Math.sqrt(Wt*Wt+Yt*Yt)),vr()}}function Dn(e){return void 0===e.touches?(e.clientX-_r)*pn:(e.touches[0].clientX-_r)*pn}function An(e){return void 0===e.touches?(e.clientY-en)*pn:(e.touches[0].clientY-en)*pn}function Sn(e){un||e.preventDefault()}function Bn(){clearTimeout(mn),mn=setTimeout(function(){xn(),we=!0,vr()},20)}function xn(){St=Fn.clientHeight-1,At=Fn.clientWidth-1,bn.style.width=At+"px",bn.style.height=St+"px",pn=devicePixelRatio,wn=pn/2,St=Math.floor(St*pn),At=Math.floor(At*pn),bn.width=At,bn.height=St,kn=pn,Z=Math.floor(Ln*pn),Le=Math.floor(yn*pn),ye=Math.floor(Rn*pn);for(var e=1;e<10;e++)Hr[e]=e*pn;for(e=0;e<Dr.length;e++)Ar[e]=Dr[e]*pn;1==Q&&(St-=Z)}function En(e,t){var r,n,o=["R","L","F","B","U","D"],a=["","m","n"],l=["","2","'"],f=-1,i=-1,u=-1,c="";0==t&&(t=10*e);for(var s=0;s<t;s++){for(;f==i||Math.floor(f/2)==Math.floor(i/2)&&f==u;)f=Math.floor(6*Math.random());u=i,i=f,r=Math.floor(3*Math.random()),e<=3?c+=""+o[f]+l[r]+" ":(n=Math.floor(Math.random()*(e>4?3:2)),5==e&&1==n&&(n=0),c+=""+o[f]+a[n]+l[r]+" ")}return c}window.addEventListener("resize",Bn);var Un=[];function In(){ot(),document.removeEventListener("touchstart",dn),document.removeEventListener("touchmove",Tn),document.removeEventListener("touchend",vn),document.removeEventListener("mousedown",dn),document.removeEventListener("mousemove",Tn),document.removeEventListener("mouseup",vn),document.removeEventListener("contextmenu",Sn),window.removeEventListener("resize",Bn)}!function(){bn=document.createElement("canvas"),void 0!==e&&function(){for(var t=e.split("&"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(Un[n[0]]=decodeURIComponent(n[1].trim()))}}();var t=Ce("id");if(null!=t)(Fn=document.getElementById(t)).innerHTML="";else if(null!=document.currentScript)Fn=document.currentScript.parentNode;else{var r=document.getElementsByTagName("script"),n=r[r.length-1];Fn=n.parentNode}null!=Fn.id&&"undefined"!=typeof removeListeners&&(removeListeners[Fn.id]=In);for(var o=0;o<6;o++)$[o]=[],_[o]=[],ee[o]=[],te[o]=[];for(o=0;o<24;o++)zt[o]=[],qt[o]=[];C=0,h=0,Ie()}()}