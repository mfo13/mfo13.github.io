"use strict";function AnimCube6(e){var t,r,n,o,a,f,i,l,u,c,s,h,v,d,g,b,m,M,p,k,L,y,R,w,F,D,T,A,B,S,x,U,E,I,P,C,X,W,Y,z,q,O,Q,Z,N,H,G,K,j,J=[],V=[],$=[],_=[],ee=[],te=[],re=[[0,-1,0],[0,1,0],[0,0,-1],[0,0,1],[-1,0,0],[1,0,0]],ne=[[-1,-1,-1],[1,-1,-1],[1,-1,1],[-1,-1,1],[-1,1,-1],[1,1,-1],[1,1,1],[-1,1,1]],oe=[[0,1,2,3],[4,7,6,5],[0,4,5,1],[2,6,7,3],[0,3,7,4],[1,5,6,2]],ae=[[0,3,2,1],[0,3,2,1],[3,2,1,0],[3,2,1,0],[0,3,2,1],[0,3,2,1]],fe=[[2,5,3,4],[4,3,5,2],[4,1,5,0],[5,1,4,0],[0,3,1,2],[2,1,3,0]],ie=[1,1,-1,-1,-1,-1],le=[0,0,-1],ue=[1,0,0],ce=[],se=[],he=[],ve=[],de=!0,ge=[],be=[],me=[],Me=[],pe=[],ke=!0,Le=-1,ye=6,Re=12,we=!0,Fe=!1,De=!1,Te=!1,Ae=0,Be=0,Se=0,xe=0,Ue=[3,2,0,5,1,4],Ee=[[30,24,18,12,6,0,31,25,19,13,7,1,32,26,20,14,8,2,33,27,21,15,9,3,34,28,22,16,10,4,35,29,23,17,11,5],[5,11,17,23,29,35,4,10,16,22,28,34,3,9,15,21,27,33,2,8,14,20,26,32,1,7,13,19,25,31,0,6,12,18,24,30],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35],[30,24,18,12,6,0,31,25,19,13,7,1,32,26,20,14,8,2,33,27,21,15,9,3,34,28,22,16,10,4,35,29,23,17,11,5],[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]];function Ie(){var e=Ce("config");null!=e?function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&(200==t.status?function(e){for(var t=e.split("\n"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(J[n[0]]=n[1].trim())}}(t.responseText):console.log("Error loading config file: "+e),Pe())},t.open("GET",e,!0),t.send()}(e):Pe()}function Pe(){V[0]=Kr(255,128,64),V[1]=Kr(255,0,0),V[2]=Kr(0,255,0),V[3]=Kr(0,0,255),V[4]=Kr(153,153,153),V[5]=Kr(170,170,68),V[6]=Kr(187,119,68),V[7]=Kr(153,68,68),V[8]=Kr(68,119,68),V[9]=Kr(0,68,119),V[10]=Kr(255,255,255),V[11]=Kr(255,255,0),V[12]=Kr(255,96,32),V[13]=Kr(208,0,0),V[14]=Kr(0,144,0),V[15]=Kr(32,64,208),V[16]=Kr(176,176,176),V[17]=Kr(80,80,80),V[18]=Kr(255,0,255),V[19]=Kr(0,255,255),V[20]=Kr(255,160,192),V[21]=Kr(32,255,16),V[22]=Kr(0,0,0),V[23]=Kr(128,128,128);var e=Ce("bgcolor");if(t=null!=e&&6==e.length&&Jr(e)?"#"+e:"gray",e=Ce("butbgcolor"),o=null!=e&&6==e.length&&Jr(e)?"#"+e:t,null!=(e=Ce("colors")))for(var u=0;u<10&&u<e.length/6;u++)Jr(e.substring(6*u,6*u+6))&&(V[u]="#"+e.substring(6*u,6*u+6));for(u=0;u<6;u++)for(var c=0;c<36;c++)$[u][c]=u+10;if(null!=(e=Ce("supercube"))&&"1"==e){De=!0,Xe(.06);for(u=0;u<36;u++)$[0][u]=22;null!=(e=Ce("scw"))&&("1"==e?Se=1:"2"==e&&(Se=2)),1==Se&&(V[10]="#000000")}if(null!=(e=Ce("gabbacolors"))&&"1"==e&&(1==De?(V[11]="#fdcf00",V[12]="#fd4e0a",V[13]="#93000d",V[14]="#00702d",V[15]="#00347a"):(Xe(.06),V[11]="#ffd90a",V[12]="#ff4f0b",V[13]="#9e0b19",V[14]="#0b7d39",V[15]="#0b4186")),null!=(e=Ce("borderwidth"))){for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(xe=10*xe+parseInt(e[u]));xe>=0&&xe<=20&&Xe(xe/100)}if(De)for(u=0;u<6;u++)for(c=0;c<36;c++)_[u][c]=0;var s="lluu";if(null!=(e=Ce("colorscheme"))&&6==e.length)for(u=0;u<6;u++){var h=23;for(c=0;c<23;c++)if(e[u].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(c)){h=c;break}for(c=0;c<36;c++)$[u][c]=h}if("1"==(e=Ce("scramble"))?Ae=1:"2"==e&&(Ae=2),0==Ae){if(null!=(e=Ce("pos"))&&216==e.length){s="uuuuff","gray"==t&&(t="white");for(u=0;u<6;u++){var g=Ue[u];for(c=0;c<36;c++){var b=Ee[u][c];$[g][b]=23;for(var m=0;m<14;m++)if(e.charAt(36*u+c)=="DFECABdfecabgh".charAt(m)){$[g][b]=m+4;break}}}}if(null!=(e=Ce("facelets"))&&216==e.length)for(u=0;u<6;u++)for(c=0;c<36;c++){$[u][c]=23;for(m=0;m<23;m++)if(e[36*u+c].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(m)){$[u][c]=m;break}}if(null!=(e=Ce("superfacelets"))&&216==e.length)for(u=0;u<6;u++)for(c=0;c<36;c++)for(m=0;m<4;m++)if(e[36*u+c].toLowerCase()=="0123".charAt(m)){_[u][c]=m;break}}if(H=0,j=!1,K=!1,null!=(e=Ce("sign"))&&"1"==e&&(K=!0,H=5,j=!0),null!=(e=Ce("yz"))&&("0"==e?j=!1:"1"==e&&(j=!0)),null!=(e=Ce("randmoves"))){var M=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(M=10*M+parseInt(e[u]));M>0&&(Be=M)}("random"==(e=Ce("move"))||Ae>0)&&(e=Wn(6,Be)),ge=null==e?[]:ze(e,!0),X=0,O=-1,0==Ae&&(null!=(e=Ce("initmove"))&&("random"==e&&(e=Wn(6,Be)),me="#"==e?ge:ze(e,!1)),null!=(e=Ce("initrevmove"))&&("random"==e&&(e=Wn(6,Be)),Me="#"==e?ge:ze(e,!1)),null!=(e=Ce("demo"))&&("random"==e&&(e=Wn(6,Be)),(be="#"==e?ge:ze(e,!0)).length>0&&be[0].length>0&&(D=!0))),e=Ce("position"),Yr(Zr(ce,le,ue)),null==e&&(e=s);var y=Math.PI/12;for(u=0;u<e.length;u++){var R=y;switch(e[u].toLowerCase()){case"d":R=-R;case"u":Hr(le,R),Hr(ue,R);break;case"f":R=-R;case"b":Gr(le,R),Gr(ue,R);break;case"l":R=-R;case"r":Nr(le,R),Nr(ue,R)}}if(Yr(Zr(ce,le,ue)),v=0,d=0,null!=(e=Ce("speed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(v=10*v+parseInt(e[u]));if(null!=(e=Ce("doublespeed")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(d=10*d+parseInt(e[u]));if(0==v&&(v=10),0==d&&(d=3*v/2),T=0,null==(e=Ce("perspective")))T=2;else for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(T=10*T+parseInt(e[u]));var w,F=0;if(null!=(e=Ce("scale")))for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(F=10*F+parseInt(e[u]));if(A=1/(1+F/10),S=!1,null!=(e=Ce("hint"))){S=!0,x=0;for(u=0;u<e.length;u++)e.charAt(u)>="0"&&e.charAt(u)<="9"&&(x=10*x+parseInt(e[u]));x<1?S=!1:x/=10}(U=3.7,null!=(e=Ce("hinthoriz")))&&((w=parseFloat(e))>0&&(U=w));(E=3.7,null!=(e=Ce("hintvert")))&&((w=parseFloat(e))>0&&(E=w));(I=0,null!=(e=Ce("hintborder"))&&"1"==e&&(I=1),Z=13,null!=(e=Ce("buttonheight")))&&((w=parseInt(e))>=9&w<=25&&(Z=w));(ye=0==ge.length?0:6,Q=1,"0"==(e=Ce("buttonbar"))?(Q=0,Z=0,ye=0):"1"==e?Q=1:"2"!=e&&0!=ge.length||(Q=2,ye=0),e=Ce("edit"),p="0"!=e,e=Ce("repeat"),k="0"!=e,e=Ce("clickprogress"),L="0"!=e,"1"==(e=Ce("movetext"))?H=1:"5"==e&&(H=5),G=1,"0"==(e=Ce("movetextspace"))&&(G=0),null!=(e=Ce("textsize")))&&((w=parseInt(e))>=5&w<=40&&(Re=w));(e=Ce("fonttype"),we=null==e||"1"==e,q=0,null!=(e=Ce("metric"))&&("1"==e?q=1:"2"==e?q=2:"3"==e&&(q=3)),B=1,null!=(e=Ce("align")))&&((w=parseInt(e))>=0&w<=3&&(B=w),w>=3&w<=99&&(B=w/100));null!=(e=Ce("snap"))&&"1"==e&&(Fe=!0);for(u=0;u<6;u++)for(c=0;c<36;c++)ee[u][c]=$[u][c],te[u][c]=_[u][c];me.length>0&&tt($,me[0],0,me[0].length,!1),Me.length>0&&tt($,Me[0],0,Me[0].length,!0),2==Ae&&tt($,ge[0],0,ge[0].length,!0);for(u=0;u<3;u++)se[u]=le[u],he[u]=ue[u],ve[u]=ce[u];sn(t)<128?(n="white",r=function(e){"#"!=e.substring(0,1)&&(e=cn(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return t=Math.floor(1.3*t),r=Math.floor(1.3*r),n=Math.floor(1.3*n),Kr(t>255?255:t,r>255?255:r,n>255?255:n)}(t)):(n="black",r=hn(t)),i=sn(o)<128?"white":"black",a=n,null!=(e=Ce("slidercolor"))&&6==e.length&&Jr(e)&&(a="#"+e),f=hn(t),null!=(e=Ce("sliderbgcolor"))&&6==e.length&&Jr(e)&&(f="#"+e),null!=(e=Ce("troughcolor"))&&6==e.length&&Jr(e)&&(f="#"+e),l="black",null!=(e=Ce("cubecolor"))&&6==e.length&&Jr(e)&&(l="#"+e),P=1,"0"==(e=Ce("counter"))&&(P=0),O=ge.length>0&&ge[0][0]>=1e3?0:-1,wn=Rn.getContext("2d"),An=Z,Bn=ye,Sn=Re,Xn(),xn.appendChild(Rn),pr(),D&&ot(-1)}function Ce(e){var t=Yn[e];return void 0===t?J[e]:t}function Xe(e){Tr[0][0]=Tr[0][1]=Tr[1][1]=Tr[3][0]=e,Tr[1][0]=Tr[2][0]=Tr[2][1]=Tr[3][1]=1-e}var We=[0,0,0,0,0,0,1,1,1,3,3,3,3,3,3,2,2,2,2,2,2],Ye=[0,1,2,3,4,5,1,2,4,5,2,0,5,2,0,0,1,2,3,4,5];function ze(e,t){if(t){for(var r=e.indexOf("{");-1!=r;)0,r=e.indexOf("{",r+1);if(null==pe)O=0,pe=[];else{for(var n=[],o=0;o<pe.length;o++)n[o]=pe[o];O=pe.length,pe=n}}var a=1;for(r=e.indexOf(";");-1!=r;)a++,r=e.indexOf(";",r+1);var f=[],i=0;for(r=e.indexOf(";"),a=0;-1!=r;)f[a]=Oe(e.substring(i,r),t,a++),i=r+1,r=e.indexOf(";",i);return f[a]=Oe(e.substring(i),t,a),f}var qe=["n","t","c","s","a","m"];function Oe(e,t,r){if(K&&(e=function(e){return e=Ze(e=Ze(e,2,"n"),3,"m")}(e)),"#"==e.trim()&&void 0!==ge[r])return ge[r];var n=0,o=[],a="UDFBLRESMXYZxyzudfblr";1==j&&(a="UDFBLRESMXZYxzyudfblr");for(var f=0;f<e.length;f++)if("."==e.charAt(f))o[n]=-1,n++;else if("{"==e.charAt(f)){f++;for(var i="";f<e.length&&"}"!=e.charAt(f);)t&&(i+=e.charAt(f)),f++;t&&(pe[O]=i,o[n]=1e3+O,O++,n++)}else for(var l=0;l<21;l++)if(e.charAt(f)==a.charAt(l)){var u=e.charAt(f);if("E"==u||"S"==u||"M"==u)continue;f++;var c=We[l];if(o[n]=28*Ye[l],f<e.length&&0==We[l])for(var s=0;s<qe.length;s++)if(e.charAt(f)==qe[s]){c=s+1,f++;break}o[n]+=4*c,f<e.length&&("1"==e.charAt(f)?f++:"'"==e.charAt(f)||"3"==e.charAt(f)?(o[n]+=2,f++):"2"==e.charAt(f)&&(++f<e.length&&"'"==e.charAt(f)?(o[n]+=3,f++):o[n]+=1)),n++,f--;break}return o}var Qe=["U","D","F","B","L","R"];function Ze(e,t,r){for(var n=0;n<6;n++){var o=new RegExp(t+Qe[n],"g");e=e.replace(o,Qe[n]+r)}return e}function Ne(e,t,r){if(t>=e.length)return"";for(var n="",o=t;o<r;o++){var a=Ke(e,o);""!=a&&(n+=a+(G?" ":""))}return n}var He=[[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["Ut","Dt","Ft","Bt","Lt","Rt"],["Uc","Dc","Fc","Bc","Lc","Rc"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["Um","Dm","Fm","Bm","Lm","Rm"]],[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["u","d","f","b","l","r"],["Z","~Z","Y","~Y","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["~E","E","S","~S","M","~M"]],[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["u","d","f","b","l","r"],["Y","~Y","Z","~Z","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["~E","E","S","~S","M","~M"]],[["U","D","F","B","L","R"],["Un","Dn","Fn","Bn","Ln","Rn"],["Uu","Dd","Ff","Bb","Ll","Rr"],["QU","QD","QF","QB","QL","QR"],["UD'","DU'","FB'","BF'","LR'","RL'"],["UD","DU","FB","BF","LR","RL"],["u","d","f","b","l","r"]],[["U","D","F","B","L","R"],["2U","2D","2F","2B","2L","2R"],["u","d","f","b","l","r"],["y","~y","z","~z","~x","x"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"],["3U","3D","3F","3B","3L","3R"]]],Ge=["","2","'","2'"];function Ke(e,t){if(t>=e.length)return"";if(e[t]>=1e3)return"";if(-1==e[t])return".";var r=He[H-1][Math.floor(e[t]/4)%7][Math.floor(e[t]/28)];return"~"==r.charAt(0)?r.substring(1)+Ge[(e[t]+2)%4]:r+Ge[e[t]%4]}var je=["","q","h","s"];function Je(e){for(var t=0,r=0;r<e.length;r++)e[r]<1e3&&t++;return t}function Ve(e,t){for(var r=0,n=0;;){for(;r<e.length&&e[r]>=1e3;)r++;if(n==t)break;r<e.length&&(n++,r++)}return r}function $e(e,t){for(var r=0,n=0;n<e.length&&(n<t||t<0);n++)r+=_e(e[n]);return r}function _e(e){if(e<0||e>=1e3)return 0;var t=e%4,r=Math.floor(e/4)%7,n=1;switch(q){case 1:1!=t&&3!=t||(n*=2);case 2:(1==r||r>3)&&(n*=2);case 3:3==r&&(n=0),3!=q||4!=r&&5!=r||(n*=2)}return n}function et(e){O=e.length>0&&e[0]>=1e3?e[0]-1e3:-1}function tt(e,t,r,n,o){for(var a=o?r+n:r;;){if(o){if(a<=r)break;a--}if(t[a]>=1e3)O=o?-1:t[a]-1e3;else if(t[a]>=0){var f=t[a]%4+1,i=Math.floor(t[a]/4)%7;4==f&&(f=2),o&&(f=4-f),Rt(e,Math.floor(t[a]/28),f,i)}if(!o&&++a>=r+n)break}}var rt=0,nt=0;function ot(e){if(at(),(D||0!=ge.length&&0!=ge[C].length)&&(!D||0!=be.length&&0!=be[0].length)){switch(W=1,Y=!1,z=!0,e){case 0:break;case 1:W=-1;break;case 2:Y=!0;break;case 3:W=-1,Y=!0;break;case 4:z=!1}vn(rt++,W)}}function at(){1==w&&(m=!0)}function ft(){X=0,de=!0,M=!1;for(var e=0;e<6;e++)for(var t=0;t<36;t++)$[e][t]=ee[e][t],_[e][t]=te[e][t];me.length>0&&void 0!==me[C]&&tt($,me[C],0,me[C].length,!1),Me.length>0&&void 0!==Me[C]&&tt($,Me[C],0,Me[C].length,!0),ge.length>0&&et(ge[C]),Ae>0&&(ge=ze(Wn(6,Be),!1)),2==Ae&&tt($,ge[0],0,ge[0].length,!0);for(e=0;e<3;e++)le[e]=se[e],ue[e]=he[e],ce[e]=ve[e];setTimeout(pr,0)}var it=[[[0,6],[0,6]],[[0,6],[0,6]],[[0,6],[0,6]],[[0,6],[0,6]],[[0,6],[0,6]],[[0,6],[0,6]]],lt=[],ut=[],ct=[],st=[],ht=[],vt=[],dt=[[[0,0],[0,0]],[[0,6],[0,6]],[[0,6],[0,1]],[[0,1],[0,6]],[[0,6],[5,6]],[[5,6],[0,6]]],gt=[[1,0,3,3,2,3],[0,1,5,5,4,5],[2,3,1,0,3,2],[4,5,0,1,5,4],[3,2,2,4,1,0],[5,4,4,2,0,1]],bt=[[0,1,5,5,4,5],[1,0,3,3,2,3],[4,5,0,1,5,4],[2,3,1,0,3,2],[5,4,4,2,0,1],[3,2,2,4,1,0]],mt=[[[0,0],[0,0]],[[4,5],[0,6]],[[0,6],[4,5]],[[0,6],[3,4]],[[0,6],[1,2]],[[3,4],[0,6]],[[1,2],[0,6]],[[2,3],[0,6]],[[0,6],[2,3]]],Mt=[[0,0,6,6,4,6],[0,0,1,1,2,1],[4,6,0,0,6,4],[2,1,0,0,1,2],[6,4,4,2,0,0],[1,2,2,4,0,0]],pt=[[0,0,7,7,8,7],[0,0,5,5,3,5],[8,7,0,0,7,8],[3,5,0,0,5,3],[7,8,8,3,0,0],[5,3,3,8,0,0]],kt=[[0,0,5,5,3,5],[0,0,7,7,8,7],[3,5,0,0,5,3],[8,7,0,0,7,8],[5,3,3,8,0,0],[7,8,8,3,0,0]],Lt=[[0,0,1,1,2,1],[0,0,6,6,4,6],[2,1,0,0,1,2],[4,6,0,0,6,4],[1,2,2,4,0,0],[6,4,4,2,0,0]];function yt(e){for(var t=0;t<6;t++)lt[t]=dt[gt[e][t]],vt[t]=dt[bt[e][t]],ut[t]=mt[Mt[e][t]],ct[t]=mt[pt[e][t]],st[t]=mt[kt[e][t]],ht[t]=mt[Lt[e][t]];de=!1}function Rt(e,t,r,n){switch(n){case 2:Ut(e,t,4-r,0),Ut(e,t,4-r,1);break;case 3:Ut(e,t,4-r,0),Ut(e,t,4-r,1),Ut(e,t,4-r,6),Ut(e,1^t,r,6),Ut(e,1^t,r,1),Ut(e,1^t,r,0);break;case 4:Ut(e,t,4-r,0),Ut(e,1^t,r,0);break;case 5:Ut(e,1^t,4-r,0),Ut(e,t,4-r,0);break;default:Ut(e,t,4-r,n)}}var wt=[0,1,2,3,4,5,11,17,23,29,35,34,33,32,31,30,24,18,12,6],Ft=[7,8,9,10,16,22,28,27,26,25,19,13],Dt=[14,15,21,20],Tt=[1,6,-1,-6,1,6,-1,-6],At=[0,5,35,30,6,4,29,31,12,3,23,32],Bt=[[3,3,3,0],[2,1,1,1],[3,3,0,0],[2,1,1,2],[3,2,0,0],[2,2,0,1]],St=[[7,7,7,4],[6,5,5,5],[7,7,4,4],[6,5,5,6],[7,6,4,4],[6,6,4,5]],xt=[];function Ut(e,t,r,n){Et(e,t,r,n),1==De&&r>0&&r<4&&(Et(_,t,r,n),function(e,t,r){if(6==r)return 4==e&&(Ot(18,1,3),1==t?Ot(12,1,1):2==t?Ot(12,1,2):3==t&&Ot(2,6,0)),5==e&&(Ot(12,1,3),1==t?Ot(3,6,0):2==t?Ot(18,1,2):3==t&&Ot(18,1,1)),2==e&&Qt(4,4-t),void(3==e&&Qt(5,t));var n=1==r;if(0==n)for(var o=0;o<36;o++)_[e][o]=(_[e][o]+4-t)%4;4==e&&(0==n&&(Ot(30,1,3),1==t?Ot(0,1,1):2==t?Ot(0,1,2):3==t&&Ot(0,6,0)),1==n&&(Ot(24,1,3),1==t?Ot(6,1,1):2==t?Ot(6,1,2):3==t&&Ot(1,6,0)));5==e&&(0==n&&(Ot(0,1,3),1==t?Ot(5,6,0):2==t?Ot(30,1,2):3==t&&Ot(30,1,1)),1==n&&(Ot(6,1,3),1==t?Ot(4,6,0):2==t?Ot(24,1,2):3==t&&Ot(24,1,1)));0==n&&(2==e&&Qt(0,4-t),3==e&&Qt(1,t));1==n&&(2==e&&Qt(2,4-t),3==e&&Qt(3,t))}(t,r,n))}function Et(e,t,r,n){if(!n){for(var o=0;o<20;o++)xt[(o+5*r)%20]=e[t][wt[o]];for(o=0;o<20;o++)e[t][wt[o]]=xt[o];for(o=0;o<12;o++)xt[(o+3*r)%12]=e[t][Ft[o]];for(o=0;o<12;o++)e[t][Ft[o]]=xt[o];for(o=0;o<4;o++)xt[(o+r)%4]=e[t][Dt[o]];for(o=0;o<4;o++)e[t][Dt[o]]=xt[o]}var a=6*r;for(o=0;o<4;o++)for(var f=fe[t][o],i=n?St[t][o]:Bt[t][o],l=Tt[i],u=n>1?At[i+4]:At[i],c=0;c<6;c++,a++)xt[a%24]=e[f][c*l+u];for(o=0,a=0;o<4;o++)for(f=fe[t][o],i=n?St[t][o]:Bt[t][o],l=Tt[i],u=n>1?At[i+4]:At[i],c=0;c<6;c++,a++)e[f][c*l+u]=xt[a]}var It,Pt,Ct,Xt,Wt,Yt,zt,qt=[[[0,1,0],[0,6,1],[0,6,4],[0,1,5]],[[30,1,0],[5,6,1],[5,6,4],[30,1,5]],[[6,1,0],[1,6,1],[1,6,4],[6,1,5]],[[24,1,0],[4,6,1],[4,6,4],[24,1,5]],[[12,1,0],[2,6,1],[2,6,4],[12,1,5]],[[18,1,0],[3,6,1],[3,6,4],[18,1,5]]];function Ot(e,t,r){for(var n=e,o=0;o<6;n+=t,o++)_[r][n]=(_[r][n]+2)%4}function Qt(e,t){for(var r=0;r<4;r++)for(var n=qt[e][r],o=n[0],a=0;a<6;o+=n[1],a++)_[n[2]][o]=(_[n[2]][o]+t)%4}var Zt,Nt,Ht=[],Gt=[],Kt=[],jt=[],Jt=[[[0,0],[6,0],[6,1],[0,1]],[[6,0],[6,6],[5,6],[5,0]],[[6,6],[0,6],[0,5],[6,5]],[[0,6],[0,0],[1,0],[1,6]],[[0,1],[6,1],[6,2],[0,2]],[[5,0],[5,6],[4,6],[4,0]],[[0,4],[6,4],[6,5],[0,5]],[[2,0],[2,6],[1,6],[1,0]],[[0,2],[6,2],[6,3],[0,3]],[[4,0],[4,6],[3,6],[3,0]],[[0,3],[6,3],[6,4],[0,4]],[[3,0],[3,6],[2,6],[2,0]]],Vt=[[1,0],[0,1],[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1]],$t=[[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[1,-1,1,-1,1,-1,1,-1,1,-1,1,-1],[1,-1,1,-1,1,-1,1,-1,1,-1,1,-1],[-1,1,-1,1,-1,1,-1,1,-1,1,-1,1],[1,-1,1,-1,1,-1,1,-1,1,-1,1,-1]],_t=[],er=[],tr=[[[1,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,1,0],[0,0,1]]],rr=[[[0,0,1],[0,0,0],[-1,0,0]],[[0,1,0],[-1,0,0],[0,0,0]],[[0,0,0],[0,0,1],[0,-1,0]]],nr=[[[0,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,0,0],[0,0,0]]],or=[1,-1,1,-1,1,-1],ar=[],fr=[],ir=[],lr=[],ur=[],cr=[],sr=[],hr=[],vr=[],dr=[],gr=[[1,0,0,0,0,0],[0,1,0,0,0,0],[1,1,0,0,0,0],[1,1,1,1,1,1],[1,0,0,0,0,1],[1,0,0,0,0,2],[0,0,1,0,0,0]],br=[],mr=[[0,2,2,2,2,2],[2,1,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,2,2,2,2],[2,2,6,2,2,2]],Mr=[[0,1,2,3,4,5],[0,1,2,3,5,4],[0,1,2,5,4,3],[0,1,5,4,3,2],[0,5,4,3,2,1],[5,4,3,2,1,0]];function pr(){if(wn.save(),wn.fillStyle=t,1!=Q||0!=ye&&!D&&0!=ge[C].length?(Vr(wn,0,0,It,Pt),wn.fillRect(0,0,It,Pt)):(Vr(wn,0,0,It,Pt-Fn),wn.fillRect(0,0,It,Pt-Fn)),zt=0,de)Sr(le,ue,ce,it,3,9,0);else{for(var e=Math.cos(h+s),n=Math.sin(h+s)*or[u],l=0;l<3;l++){ar[l]=0,fr[l]=0;for(var v=0;v<3;v++){var d=Math.floor(u/2);ar[l]+=le[v]*(nr[d][l][v]+tr[d][l][v]*e+rr[d][l][v]*n),fr[l]+=ue[v]*(nr[d][l][v]+tr[d][l][v]*e+rr[d][l][v]*n)}}Zr(ir,ar,fr);var g,b,m,M=Math.cos(h-s),p=Math.sin(h-s)*or[u];for(l=0;l<3;l++){lr[l]=0,ur[l]=0;for(v=0;v<3;v++){d=Math.floor(u/2);lr[l]+=le[v]*(nr[d][l][v]+tr[d][l][v]*M+rr[d][l][v]*p),ur[l]+=ue[v]*(nr[d][l][v]+tr[d][l][v]*M+rr[d][l][v]*p)}}Zr(cr,lr,ur),hr[0]=le,vr[0]=ue,dr[0]=ce,hr[1]=ar,vr[1]=fr,dr[1]=ir,hr[2]=lr,vr[2]=ur,dr[2]=cr,br[0]=lt,br[1]=ut,br[2]=ct,br[3]=st,br[4]=ht,br[5]=vt;var k=[],L=[];for(l=0;l<7;l++)Wr(L,re[u]),zr(Wr(k,L),2/6),Qr(zr(Wr(sr,le),5+T),Qr(L,zr(k,l))),b=qr(sr,re[u]),0==l?(b<0&&(g=0),b>0&&(g=5)):(b>0&&m<0||b<0&&m>0)&&(g=6-l,l=7),m=b;for(l=0;l<6;l++){v=Mr[g][l];var y=gr[c][v],R=u%2==1?5-v:v;Sr(hr[y],vr[y],dr[y],br[v],mr[c][v],l,R)}}if(N||w||(Le=-1),!(Ae>0&&2==Q)){if(!D&&ge.length>0){if(ge[C].length>0){if(ye>0){wn.lineWidth=Tn,wn.strokeStyle=i;var F=(It-2)*function(e,t){for(var r=0,n=0;n<t;n++)e[n]<1e3&&r++;return r}(ge[C],X)/Je(ge[C]);wn.fillStyle=f,wn.fillRect(Dn,Pt-ye-Dn,It-Fn,ye),wn.fillStyle=a,wn.fillRect(Dn,Pt-ye-Dn,F,ye),wn.beginPath(),wn.rect(Dn,Pt-ye-Dn,It-Fn,ye),wn.stroke()}wn.font="bold "+Re+"px helvetica";var A=$e(ge[C],X)+"/"+$e(ge[C],-1)+je[q],B=wn.measureText(A).width,S=It-B-2,x=Pt-ye-Math.floor(4*Fn);H>0?(P&&Pr(wn,A,we?S-Fn:S,x-Re),function(e,t){var n=0==X?Ve(ge[C],X):X,o=Ne(ge[C],0,n),a=Ke(ge[C],n),f=Ne(ge[C],n+1,ge[C].length);G&&(""==a&&(o=o.substr(0,o.length-1)),""!=f&&(f=" "+f.substr(0,f.length-1)));var i=e.measureText(o).width,l=e.measureText(a).width,u=e.measureText(f).width,c=1;c+i+l+u>It&&(c=Math.min(1,It/2-i-l/2),c=Math.max(c,It-i-l-u-2));l>0&&(e.fillStyle=r,e.lineWidth=2,e.strokeStyle="black",e.beginPath(),Sn<=14?e.fillRect(c+i-1,Pt-ye-Re-Math.floor(4*Fn),l+2,Re+Math.floor(3*Fn)):e.fillRect(c+i-1,Pt-ye-Re-Math.floor(2*Fn),l+2,Re+Math.floor(Fn)));i>0&&Pr(e,o,c,t);l>0&&Pr(e,a,c+i,t);u>0&&Pr(e,f,c+i+l,t)}(wn,x)):P&&Pr(wn,A,we?S-Fn:S,x)}if(ge.length>1){wn.font="bold "+Re+"px helvetica";A=C+1+"/"+ge.length,B=wn.measureText(A).width,S=It-B-2*Z-Math.floor(5*Fn);Pr(wn,A,S,kr()),_r(wn,7,It-2*Z,0),_r(wn,8,It-Z,0)}}O>=0&&(wn.font="bold "+Re+"px helvetica",Pr(wn,pe[O],we?Fn:0,kr()))}wn.restore(),ke&&0!=Q&&function(e){var t=Z%2==0?1:0;if(t+=Math.floor(Fn+.5)-1,2==Q)return e.fillStyle=0==Le||Ae>0&&6==Le?hn(o):o,e.fillRect(Dn,Pt-Z,Z,Z),e.lineWidth=Tn,e.strokeStyle=i,e.beginPath(),e.rect(Dn,Pt-Z-Dn,Z,Z),e.stroke(),void _r(e,0,Z/2,Pt-(Z+1)/2-t);if(1==Q){for(var r=0,n=0;n<7;n++){var a=Math.floor((It-r)/(7-n));e.fillStyle=Le==n?hn(o):o,e.fillRect(r,Pt,a,Z),e.lineWidth=Tn,e.strokeStyle=i,e.beginPath(),0==n?e.rect(r+Dn,Pt-Dn,a-Fn,Z):e.rect(r-Dn,Pt-Dn,a,Z),e.stroke(),e.strokeStyle="black",_r(e,n,r+a/2,Pt+Z/2-t),r+=a}ke=!1}}(wn)}function kr(){return Sn<10?Math.floor(10*Fn):Sn<12?Math.floor(12*Fn):Sn<14?Math.floor(14*Fn):Re}var Lr=[],yr=[],Rr=[],wr=[],Fr=[[],[],[],[],[],[]],Dr=[[],[],[],[],[],[]],Tr=[[.1,.1],[.9,.1],[.9,.9],[.1,.9]],Ar=[[0,0],[0,1],[1,1],[1,0]],Br=[];function Sr(e,t,r,n,o,a,f){for(var i=0;i<8;i++){var c=(v=It<Pt?It:Pt-ye)/3.7*qr(ne[i],t)*A,s=v/3.7*qr(ne[i],r)*A;c/=1-(d=v/(5+T)*qr(ne[i],e)*A)/v,s/=1-d/v,Rr[i]=It/2+c,wr[i]=0==B?(Pt-ye)/2*A-s:1==B?(Pt-ye)/2-s:2==B?Pt-ye-(Pt-ye)/2*A-s:(Pt-ye)*(B*(1-A)+A/2)-s}for(i=0;i<6;i++)for(var h=0;h<4;h++)Fr[i][h]=Rr[oe[i][h]],Dr[i][h]=wr[oe[i][h]];if(S)for(i=0;i<6;i++)if(Qr(zr(Wr(sr,e),5+T),re[i]),qr(sr,re[i])<0){zr(Wr(Br,re[i]),x);var v,d;c=(v=It<Pt?It:Pt-ye)/U*qr(Br,t),s=v/E*qr(Br,r);c/=1-(d=v/(5+T)*qr(Br,e))/v,s/=1-d/v;var g=n[i][0][1]-n[i][0][0],b=n[i][1][1]-n[i][1][0];if(g>0&&b>0)for(var m=0,k=n[i][1][0];m<b;m++,k++)for(var L=0,y=n[i][0][0];L<g;L++,y++){for(h=0;h<4;h++)Ur(i,h,Lr,yr,y+Tr[h][0],k+Tr[h][1],M),Lr[h]=Math.floor(Lr[h]+(M?-c:c)),yr[h]=Math.floor(yr[h]-s);1==De?(on(wn,Lr,yr,"#fdfdfd"),nn(wn,Lr,yr,I?hn("#fdfdfd"):"#fdfdfd"),un(wn,Lr,yr,i,_[i][6*k+y],V[$[i][6*k+y]])):(on(wn,Lr,yr,V[$[i][6*k+y]]),nn(wn,Lr,yr,I?hn(V[$[i][6*k+y]]):V[$[i][6*k+y]]))}}for(i=0;i<6;i++){g=n[i][0][1]-n[i][0][0],b=n[i][1][1]-n[i][1][0];if(g<=0||b<=0){var R=xr(i,f);if(0!=R){for(h=0;h<4;h++){var F=ae[i][h];Lr[h]=Math.floor(Fr[i][h]+(Fr[1^i][F]-Fr[i][h])*R),yr[h]=Math.floor(Dr[i][h]+(Dr[1^i][F]-Dr[i][h])*R),M&&(Lr[h]=It-Lr[h])}on(wn,Lr,yr,l)}}else{for(h=0;h<4;h++)Ur(i,h,Lr,yr,n[i][0][Ar[h][0]],n[i][1][Ar[h][1]],M);a<5?on(wn,Lr,yr,l):(Qr(zr(Wr(sr,e),5+T),re[i]),qr(sr,re[i])>0&&on(wn,Lr,yr,l))}}for(i=0;i<6;i++)if(Qr(zr(Wr(sr,e),5+T),re[i]),qr(sr,re[i])>0){g=n[i][0][1]-n[i][0][0],b=n[i][1][1]-n[i][1][0];if(g>0&&b>0)for(m=0,k=n[i][1][0];m<b;m++,k++)for(L=0,y=n[i][0][0];L<g;L++,y++){for(h=0;h<4;h++)Ur(i,h,Lr,yr,y+Tr[h][0],k+Tr[h][1],M);1==De?(nn(wn,Lr,yr,"#fdfdfd"),on(wn,Lr,yr,"#fdfdfd"),un(wn,Lr,yr,i,_[i][6*k+y],V[$[i][6*k+y]])):(nn(wn,Lr,yr,V[$[i][6*k+y]]),on(wn,Lr,yr,V[$[i][6*k+y]]))}if(!p||w)continue;var D=(Fr[i][1]-Fr[i][0]+Fr[i][2]-Fr[i][3])/6,P=(Fr[i][3]-Fr[i][0]+Fr[i][2]-Fr[i][1])/6,C=(Dr[i][1]-Dr[i][0]+Dr[i][2]-Dr[i][3])/6,X=(Dr[i][3]-Dr[i][0]+Dr[i][2]-Dr[i][1])/6;if(3==o)for(h=0;h<12;h++){for(F=0;F<4;F++)Ur(i,F,Ht[zt],Gt[zt],Jt[h][F][0],Jt[h][F][1],!1);if(Kt[zt]=(D*Vt[h][0]+C*Vt[h][1])*$t[i][h],jt[zt]=(P*Vt[h][0]+X*Vt[h][1])*$t[i][h],_t[zt]=fe[i][h%4],er[zt]=h>3?1:0,(zt>7&&zt<12||zt>19&&zt<24||zt>31&&zt<36)&&(er[zt]=6),36==++zt)break}else if(0==o){if(i!=u&&g>0&&b>0){for(h=6==g?0==n[i][1][0]?0:2:0==n[i][0][0]?3:1,F=0;F<4;F++)Ur(i,F,Ht[zt],Gt[zt],Jt[h][F][0],Jt[h][F][1],!1);Kt[zt]=(D*Vt[h][0]+C*Vt[h][1])*$t[i][h],jt[zt]=(P*Vt[h][0]+X*Vt[h][1])*$t[i][h],_t[zt]=u,er[zt]=0,zt++}}else if(1==o){if(i!=u&&g>0&&b>0){h=6==g?1==n[i][1][0]?0:2:1==n[i][0][0]?3:1;h+=4;for(F=0;F<4;F++)Ur(i,F,Ht[zt],Gt[zt],Jt[h][F][0],Jt[h][F][1],!1);Kt[zt]=(D*Vt[h][0]+C*Vt[h][1])*$t[i][h],jt[zt]=(P*Vt[h][0]+X*Vt[h][1])*$t[i][h],_t[zt]=u,er[zt]=1,zt++}}else if(6==o&&i!=u&&g>0&&b>0){h=6==g?2==n[i][1][0]?0:2:2==n[i][0][0]?3:1;h+=8;for(F=0;F<4;F++)Ur(i,F,Ht[zt],Gt[zt],Jt[h][F][0],Jt[h][F][1],!1);Kt[zt]=(D*Vt[h][0]+C*Vt[h][1])*$t[i][h],jt[zt]=(P*Vt[h][0]+X*Vt[h][1])*$t[i][h],_t[zt]=u,er[zt]=6,zt++}}}function xr(e,t){var r=0,n=e%2,o=u%2;return 0==c?r=a(0==o?0:5):1==c?r=a(0==o?1:4):6==c?r=a(0==o?2:3):2==c?e==u?(0==o&&2==t||1==o&&3==t)&&(r=2/6):(0==o&&1==t||1==o&&4==t)&&(r=4/6):4!=c&&5!=c||((0==n&&1==t||1==n&&4==t)&&(r=1/6),(1==n&&0==t||0==n&&5==t)&&(r=5/6)),r;function a(e){if(0==n){if(t==e)return e/6;if(t==e+1)return(e+1)/6}else{if(t==e)return(5-e)/6;if(t==e-1)return(6-e)/6}return 0}}function Ur(e,t,r,n,o,a,f){o/=6,a/=6;var i=Fr[e][0]+(Fr[e][1]-Fr[e][0])*o,l=Dr[e][0]+(Dr[e][1]-Dr[e][0])*o,u=Fr[e][3]+(Fr[e][2]-Fr[e][3])*o,c=Dr[e][3]+(Dr[e][2]-Dr[e][3])*o;r[t]=Math.floor(.5+i+(u-i)*a),n[t]=Math.floor(.5+l+(c-l)*a),f&&(r[t]=It-r[t])}var Er=[1,1,-1,-1,-1,1,1,-1,-1,0,1,0,0,1,0,-1],Ir=[];function Pr(e,t,r,o){if(we){e.fillStyle="black";for(var a=0;a<Ir.length;a+=2)e.fillText(t,r+Ir[a],o+Ir[a+1]);e.fillStyle="white"}else e.fillStyle=n;e.fillText(t,r,o)}var Cr=[-1,3,1,-1,0,2,4,-1],Xr=[];function Wr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Yr(e){var t=Math.sqrt(qr(e,e));return e[0]/=t,e[1]/=t,e[2]/=t,e}function zr(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e}function qr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Or(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e}function Qr(e,t){return e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e}function Zr(e,t,r){return e[0]=t[1]*r[2]-t[2]*r[1],e[1]=t[2]*r[0]-t[0]*r[2],e[2]=t[0]*r[1]-t[1]*r[0],e}function Nr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[1]*n-e[2]*r,a=e[1]*r+e[2]*n;return e[1]=o,e[2]=a,e}function Hr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[2]*r,a=e[0]*r+e[2]*n;return e[0]=o,e[2]=a,e}function Gr(e,t){var r=Math.sin(t),n=Math.cos(t),o=e[0]*n-e[1]*r,a=e[0]*r+e[1]*n;return e[0]=o,e[1]=a,e}function Kr(e,t,r){return"#"+jr(e.toString(16))+jr(t.toString(16))+jr(r.toString(16))}function jr(e){return("00"+e).substring(e.length)}function Jr(e){for(var t=0,r=0;r<6;r++)for(var n=0;n<16;n++)if(e[r].toLowerCase()=="0123456789abcdef".charAt(n)){t++;break}return 6==t}function Vr(e,t,r,n,o){e.beginPath(),e.moveTo(t,r),e.lineTo(t+n,r),e.lineTo(t+n,r+o),e.lineTo(t,r+o),e.lineTo(t,r),e.closePath(),e.clip()}var $r=[];function _r(e,t,r,n){switch(r=Math.floor(r),n=Math.floor(n),t){case 0:tn(e,r-$r[5],n-$r[5],$r[3],2.05*$r[5]),en(e,r+$r[5],n,-1);break;case 1:tn(e,r+$r[1],n-$r[5],$r[3],2.05*$r[5]),en(e,r-$r[1],n,-1);break;case 2:en(e,r+$r[1],n,-1);break;case 3:w?tn(e,r-$r[5],n-$r[5],2.05*$r[5],2.05*$r[5]):(tn(e,r-$r[9]/2,n-$r[7]/2,$r[8],1.5*$r[5]),tn(e,r-$r[2],n-$r[5],$r[3],2.05*$r[5]));break;case 4:en(e,r-$r[2],n,1);break;case 5:tn(e,r-$r[6],n-$r[5],$r[3],2.05*$r[5]),en(e,r-1.5*$r[1],n,1);break;case 6:tn(e,r+$r[1],n-$r[5],$r[3],2.05*$r[5]),en(e,r-$r[6],n,1);break;case 7:var a=7==Le?hn(o):o;rn(e,r-2*Fn,n+Fn,Z,n+Z,a),en(e,r+2*Fn+Z/2-3*Fn,n+Z/2+Dn,-1);break;case 8:a=8==Le?hn(o):o;rn(e,r-2*Fn,n+Fn,Z,n+Z,a),en(e,r-Fn+Z/2-3*Fn,n+Z/2+Dn,1)}}function en(e,t,r,n){var o=4.5*Fn,a=[],f=[];a[0]=t,a[1]=t+n,a[2]=t+5*Fn*n,a[3]=t+n,a[4]=t,f[0]=r-o,f[1]=r-o,f[2]=r,f[3]=r+o,f[4]=r+o,function(e,t,r){e.beginPath(),e.moveTo(t[0]+Dn,r[0]+Dn);for(var n=1;n<5;n++)e.lineTo(t[n]+Dn,r[n]+Dn);e.closePath(),e.fillStyle="white",e.strokeStyle="black",e.fill(),e.lineWidth=Tn,e.stroke()}(e,a,f)}function tn(e,t,r,n,o){e.lineWidth=Tn,e.beginPath(),e.rect(t+Dn,r+Dn,n-1,o-1),e.fillStyle="white",e.fill(),e.strokeStyle="black",e.stroke()}function rn(e,t,r,n,o,a){e.lineWidth=Tn,e.beginPath(),e.rect(t+Dn,r+Dn,n-1,o-1),e.fillStyle=a,e.fill(),e.strokeStyle="black",e.stroke()}function nn(e,t,r,n){e.beginPath(),e.moveTo(t[0],r[0]),e.lineTo(t[1],r[1]),e.lineTo(t[2],r[2]),e.lineTo(t[3],r[3]),e.closePath(),e.strokeStyle=n,e.lineWidth=.7*Fn,e.stroke()}function on(e,t,r,n){e.beginPath(),e.moveTo(t[0],r[0]),e.lineTo(t[1],r[1]),e.lineTo(t[2],r[2]),e.lineTo(t[3],r[3]),e.closePath(),e.fillStyle=n,e.fill()}var an,fn,ln=[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]];function un(e,t,r,n,o,a){var f=[],i=[];if(2!=Se||"#ffffff"!=a){for(var l=0;l<4;l++)f[l]=Math.floor(t[l]+.05*(t[ln[2][l]]-t[l])),i[l]=Math.floor(r[l]+.05*(r[ln[2][l]]-r[l]));0==n&&(o=(o+1)%4),4==n&&(o=(o+3)%4);var u=ln[o][0],c=ln[o][1],s=ln[o][2],h=ln[o][3],v=.26*(f[s]-f[c]),d=.26*(i[s]-i[c]),g=(f[u]-f[c])/2,b=i[c]+(i[u]-i[c])/2,m=i[s]+(i[h]-i[s])/2,M=(f[h]-f[s])/2,p=1^o;e.fillStyle=a,e.beginPath(),e.moveTo(f[u]+(f[h]-f[u])/2,i[u]+(i[h]-i[u])/2),e.lineTo(f[p]+g,b),e.lineTo(f[p]+v+g,b+d),e.lineTo(f[p]+v,i[p]+d),p=(p+1)%4,e.lineTo(f[p]-v,i[p]-d),e.lineTo(f[p]-v+M,m-d),e.lineTo(f[p]+M,m),e.closePath(),e.fill(),e.lineWidth=.6*Fn,e.strokeStyle="black",e.stroke()}}function cn(e){return"white"==e?"#FFFFFF":"black"==e?"#000000":"#808080"}function sn(e){return"#"!=e.substring(0,1)&&(e=cn(e)),(299*parseInt(e.substring(1,3),16)+587*parseInt(e.substring(3,5),16)+114*parseInt(e.substring(5,7),16))/1e3}function hn(e){"#"!=e.substring(0,1)&&(e=cn(e));var t=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),n=parseInt(e.substring(5,7),16);return Kr(t=Math.floor(.7*t),r=Math.floor(.7*r),n=Math.floor(.7*n))}function vn(e,t){if(e>nt)setTimeout(vn,0,e,t);else{if(!D&&(0==ge.length||0==ge[C].length))return w=!1,ke=!0,void pr();if(!z){for(var r=ge[C];X<r.length;){if(r[X]>=1e3)O=r[X]-1e3;else if(-1!=r[X]){var n=r[X]%4+1,o=Math.floor(r[X]/4)%7,a=Math.floor(r[X]/28);Rt($,a,4==n?2:n,o)}X++}return w=!1,ke=!0,pr(),void nt++}var f,i,l,g,M,p,L=t;b=!1,requestAnimationFrame(function e(){if(T){if(T=!1,p=!1,k)L>0?X>=r.length&&(X=0,et(r)):(O=-1,0==X&&(X=r.length));else if(L>0&&X>=r.length||L<0&&0==X)return m=!1,w=!1,nt++,ke=!0,void pr();w=!0,ke=!0}if(A&&(A=!1,L<0&&(x=!1,0==X?(x=!0,S=!0):X--),!x)){if(F=!1,-1==r[X]){if(pr(),!Y)for(f=Date.now();Date.now()-f<1e3;);}else r[X]>=1e3?O=L>0?r[X]-1e3:-1:F=!0;if(F){n=r[X]%4+1,o=Math.floor(r[X]/4)%7;var t=n<3;if(4==n&&(n=2),L<0&&(t=!t,n=4-n),a=Math.floor(r[X]/28),y=!1,de=!0,R=!0,h=0,ie[a]>0&&(t=!t),z){M=Math.PI/2,g=t?1:-1;var U=67*v;2==n&&(M=Math.PI,U=67*d),y=!0,u=a,c=o,yt(a),f=Date.now(),i=f,l=g*M/U,s=0}}else B=!0}x||(F&&(z&&s*g<M?(pr(),(b||m)&&(B=!0),i=Date.now(),s=l*(i-f)):B=!0),B&&(B=!1,A=!0,F&&(s=0,y=!1,de=!0,Rt($,a,n,o),R=!1,z&&pr(),Y&&(p=!0)),L>0?(++X<r.length&&r[X]>=1e3&&(O=r[X]-1e3,X++),X==r.length&&(D?function(e){X=0;for(var t=0;t<6;t++)for(var r=0;r<36;r++)$[t][r]=ee[t][r],_[t][r]=te[t][r];me.length>0&&void 0!==me[C]&&tt($,me[C],0,me[C].length,!1);Me.length>0&&void 0!==Me[C]&&tt($,Me[C],0,Me[C].length,!0);et(e)}(r):S=!0)):O=-1,(b||m||p)&&(S=!0)));if(S)return S=!1,T=!0,rt<=nt+1&&(w=!1),ke=!0,0==Le&&ft(),pr(),D&&(ft(),D=!1),m=!1,nt++,void(1==X&&r[0]>=1e3&&X--);requestAnimationFrame(e)});var F=!1,T=!0,A=!0,B=!1,S=!1,x=!1;r=D?be[0]:ge[C]}}document.addEventListener("touchstart",kn),document.addEventListener("touchmove",Un,{passive:!1}),document.addEventListener("touchend",pn),document.addEventListener("mousedown",kn),document.addEventListener("mousemove",Un),document.addEventListener("mouseup",pn),document.addEventListener("contextmenu",Pn);var dn=!1,gn=!0,bn=document.getElementsByTagName("div"),mn=bn.length>0&&"wrap"==bn[0].className;function Mn(e){mn?bn[0].style.overflow=e:document.body.style.overflow=e}function pn(e){if(dn&&void 0!==e.touches&&(e.preventDefault(),Mn("auto")),dn?setTimeout(function(){gn=!0},100):gn=!0,dn=!1,F=!1,N)N=!1,ke=!0,pr();else if(y&&!R){y=!1,h+=s,s=0;for(var t=h;t<0;)t+=32*Math.PI;var r=Math.floor(8*t/Math.PI)%16;(Fe||r%4==0||r%4==3)&&(r=Math.floor((r+2)/4),ie[u]>0&&(r=(4-r)%4),h=0,de=!0,Rt($,u,r,c)),pr()}}function kn(e){var t=Rn.getBoundingClientRect(),r=Math.floor(t.left),n=Math.floor(t.top);if(void 0===e.touches)var o=e.clientX,a=e.clientY;else o=e.touches[0].clientX,a=e.touches[0].clientY;o<r||o>r+It/Fn||a<n||a>n+(Pt+Z)/Fn||(e.preventDefault(),dn=!0,gn=!1,void 0!==e.touches&&Mn("hidden"),an=r,fn=n,Wt=Ct=En(e),Yt=Xt=In(e),g=!1,(Le=function(e,t){if(0==Q)return-1;if(ge.length>1&&e>=It-2*Z&&e<It-Z&&t>=0&&t<Z)return 7;if(ge.length>1&&e>=It-Z&&e<It&&t>=0&&t<Z)return 8;if(2==Q)return e>=0&&e<Z&&t>=Pt-Z&&t<Pt?0:-1;if(t<Pt)return-1;for(var r=0,n=0;n<7;n++){var o=(It-r)/(7-n);if(e>=r&&e<r+o&&t>=Pt&&t<Pt+Z)return n;r+=o}return-1}(Ct,Xt))>=0?(N=!0,3==Le?w?at():M=!M:0==Le?Ae>0&&2==Q?1==Te?(Te=!1,at(),ft()):(Te=!0,ot(Cr[Le=6])):(at(),ft()):7==Le||8==Le?(at(),setTimeout(ft,20),C=7==Le?C>0?C-1:ge.length-1:C<ge.length-1?C+1:0):ot(Cr[Le]),ke=!0,pr()):ye>0&&ge.length>0&&ge[C].length>0&&Xt>Pt-ye&&Xt<=Pt?L&&(at(),Ln(rt++)):(M&&(Wt=Ct=It-Ct),void 0===e.touches?!p||w||0!=e.button||e.shiftKey||(g=!0):p&&!w&&(g=!0)))}function Ln(e){if(e>nt)setTimeout(Ln,0,e);else{var t=Je(ge[C]),r=Math.floor(((Ct-1)*t*2/(It-2)+1)/2);(r=Math.max(0,Math.min(t,r)))>0&&(r=Ve(ge[C],r)),r>X&&tt($,ge[C],X,r-X,!1),r<X&&tt($,ge[C],r,X-r,!0),X=r,F=!0,pr(),w=!1,nt++}}var yn,Rn,wn,Fn,Dn,Tn,An,Bn,Sn,xn;Xr=[];function Un(e){if(dn&&!N){if(void 0!==e.touches&&e.preventDefault(),F){at();var t=Je(ge[C]),r=Math.floor(((En(e)-1)*t*2/(It-2)+1)/2);return(r=Math.max(0,Math.min(t,r)))>0&&(r=Ve(ge[C],r)),r>X&&tt($,ge[C],X,r-X,!1),r<X&&tt($,ge[C],r,X-r,!0),X=r,void pr()}var n=M?It-En(e):En(e),o=In(e),a=n-Ct,f=o-Xt;if(p&&g&&!y&&!w){Wt=n,Yt=o;for(var i=0;i<zt;i++){var l=Ht[i][0],h=Ht[i][1]-l,v=Ht[i][3]-l,d=Gt[i][0],b=Gt[i][1]-d,m=Gt[i][3]-d,k=(m*(Ct-l)-v*(Xt-d))/(h*m-v*b),L=(-b*(Ct-l)+h*(Xt-d))/(h*m-v*b);if(k>0&&k<1&&L>0&&L<1){if(a*a+f*f<144)return;if(Zt=Kt[i],Nt=jt[i],Math.abs(Zt*a+Nt*f)/Math.sqrt((Zt*Zt+Nt*Nt)*(a*a+f*f))>.75){y=!0,u=_t[i],c=er[i];break}}}g=!1,Ct=Wt,Xt=Yt}a=(n-Ct)/Fn,f=(o-Xt)/Fn,!y||w?(Yr(Or(le,zr(Wr(Xr,ue),-.016*a))),Yr(Zr(ue,ce,le)),Yr(Or(le,zr(Wr(Xr,ce),.016*f))),Yr(Zr(ce,le,ue)),Ct=n,Xt=o):(de&&yt(u),s=.03*(Zt*a+Nt*f)/Math.sqrt(Zt*Zt+Nt*Nt)),pr()}}function En(e){return void 0===e.touches?(e.clientX-an)*Fn:(e.touches[0].clientX-an)*Fn}function In(e){return void 0===e.touches?(e.clientY-fn)*Fn:(e.touches[0].clientY-fn)*Fn}function Pn(e){gn||e.preventDefault()}function Cn(){clearTimeout(yn),yn=setTimeout(function(){Xn(),ke=!0,pr()},20)}function Xn(){Pt=xn.clientHeight-1,It=xn.clientWidth-1,Rn.style.width=It+"px",Rn.style.height=Pt+"px",Fn=devicePixelRatio,Dn=Fn/2,Pt=Math.floor(Pt*Fn),It=Math.floor(It*Fn),Rn.width=It,Rn.height=Pt,Tn=Fn,Z=Math.floor(An*Fn),ye=Math.floor(Bn*Fn),Re=Math.floor(Sn*Fn);for(var e=1;e<10;e++)$r[e]=e*Fn;for(e=0;e<Er.length;e++)Ir[e]=Er[e]*Fn;1==Q&&(Pt-=Z)}function Wn(e,t){var r,n,o=["R","L","F","B","U","D"],a=["","m","n"],f=["","2","'"],i=-1,l=-1,u=-1,c="";0==t&&(t=10*e);for(var s=0;s<t;s++){for(;i==l||Math.floor(i/2)==Math.floor(l/2)&&i==u;)i=Math.floor(6*Math.random());u=l,l=i,r=Math.floor(3*Math.random()),e<=3?c+=""+o[i]+f[r]+" ":(n=Math.floor(Math.random()*(e>4?3:2)),5==e&&1==n&&(n=0),c+=""+o[i]+a[n]+f[r]+" ")}return c}window.addEventListener("resize",Cn);var Yn=[];function zn(){at(),document.removeEventListener("touchstart",kn),document.removeEventListener("touchmove",Un),document.removeEventListener("touchend",pn),document.removeEventListener("mousedown",kn),document.removeEventListener("mousemove",Un),document.removeEventListener("mouseup",pn),document.removeEventListener("contextmenu",Pn),window.removeEventListener("resize",Cn)}!function(){Rn=document.createElement("canvas"),void 0!==e&&function(){for(var t=e.split("&"),r=0;r<t.length;r++){var n=t[r].split("=");void 0!==n[1]&&(Yn[n[0]]=decodeURIComponent(n[1].trim()))}}();var t=Ce("id");if(null!=t)(xn=document.getElementById(t)).innerHTML="";else if(null!=document.currentScript)xn=document.currentScript.parentNode;else{var r=document.getElementsByTagName("script"),n=r[r.length-1];xn=n.parentNode}null!=xn.id&&"undefined"!=typeof removeListeners&&(removeListeners[xn.id]=zn);for(var o=0;o<6;o++)$[o]=[],_[o]=[],ee[o]=[],te[o]=[];for(o=0;o<36;o++)Ht[o]=[],Gt[o]=[];C=0,h=0,Ie()}()}